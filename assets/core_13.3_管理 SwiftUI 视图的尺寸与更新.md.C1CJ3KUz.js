import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.ymCRTBvy.js";const o=JSON.parse('{"title":"ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°","description":"","frontmatter":{},"headers":[],"relativePath":"core/13.3_ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°.md","filePath":"core/13.3_ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°.md"}'),t={name:"core/13.3_ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°.md"};function p(e,s,h,k,r,E){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="ç®¡ç†-swiftui-è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°" tabindex="-1">ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–° <a class="header-anchor" href="#ç®¡ç†-swiftui-è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°" aria-label="Permalink to &quot;ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°&quot;">â€‹</a></h1><h2 id="ç®¡ç†-swiftui-è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°-1" tabindex="-1">ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–° <a class="header-anchor" href="#ç®¡ç†-swiftui-è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°-1" aria-label="Permalink to &quot;ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ä¸æ›´æ–°&quot;">â€‹</a></h2><p>åœ¨ UIKit/AppKit ä¸­ä½¿ç”¨ SwiftUI æ—¶ï¼Œç²¾ç¡®ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸å’Œæ›´æ–°è‡³å…³é‡è¦ã€‚è¿™ç¡®ä¿äº†ä½ çš„ SwiftUI å†…å®¹èƒ½å¤Ÿæ— ç¼é›†æˆåˆ°ç°æœ‰çš„ UIKit/AppKit åº”ç”¨ä¸­ï¼Œå¹¶æä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢å¦‚ä½•æœ‰æ•ˆåœ°åšåˆ°è¿™ä¸€ç‚¹ï¼ğŸš€</p><h2 id="å°ºå¯¸ç®¡ç†ç­–ç•¥" tabindex="-1">å°ºå¯¸ç®¡ç†ç­–ç•¥ <a class="header-anchor" href="#å°ºå¯¸ç®¡ç†ç­–ç•¥" aria-label="Permalink to &quot;å°ºå¯¸ç®¡ç†ç­–ç•¥&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦æ˜ç¡® SwiftUI è§†å›¾åœ¨ UIKit/AppKit å®¹å™¨ä¸­çš„å°ºå¯¸ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥æ§åˆ¶å°ºå¯¸ï¼š</p><ol><li><p><strong>å›ºå®šå°ºå¯¸</strong>ï¼šç›´æ¥è®¾ç½® SwiftUI è§†å›¾çš„ <code>frame</code>ã€‚è¿™é€‚ç”¨äºä½ çŸ¥é“ SwiftUI è§†å›¾æ‰€éœ€ç¡®åˆ‡å°ºå¯¸çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå›ºå®šé«˜åº¦å’Œå®½åº¦çš„æŒ‰é’®ã€‚</p></li><li><p><strong>è‡ªåŠ¨å¸ƒå±€çº¦æŸ</strong>ï¼šä½¿ç”¨ UIKit/AppKit çš„è‡ªåŠ¨å¸ƒå±€çº¦æŸæ¥ç®¡ç† SwiftUI è§†å›¾çš„å°ºå¯¸ã€‚è¿™å…è®¸ SwiftUI è§†å›¾æ ¹æ®å…¶å†…å®¹æˆ–å‘¨å›´çš„ UIKit/AppKit å…ƒç´ åŠ¨æ€è°ƒæ•´å¤§å°ã€‚</p></li><li><p><strong><code>intrinsicContentSize</code></strong>ï¼šåˆ©ç”¨ SwiftUI è§†å›¾çš„å›ºæœ‰å†…å®¹å°ºå¯¸ã€‚UIKit/AppKit å¯ä»¥æŸ¥è¯¢ SwiftUI è§†å›¾çš„ <code>intrinsicContentSize</code>ï¼Œå¹¶æ®æ­¤è°ƒæ•´å¸ƒå±€ã€‚</p></li></ol><h2 id="æ›´æ–°æœºåˆ¶" tabindex="-1">æ›´æ–°æœºåˆ¶ <a class="header-anchor" href="#æ›´æ–°æœºåˆ¶" aria-label="Permalink to &quot;æ›´æ–°æœºåˆ¶&quot;">â€‹</a></h2><p>SwiftUI è§†å›¾çš„æ›´æ–°ç”± SwiftUI è¿è¡Œæ—¶ç®¡ç†ã€‚å½“ SwiftUI è§†å›¾çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚ç„¶è€Œï¼Œåœ¨ UIKit/AppKit ä¸­ï¼Œä½ éœ€è¦ç¡®ä¿è¿™äº›æ›´æ–°èƒ½å¤Ÿæ­£ç¡®åœ°åæ˜ å‡ºæ¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‚¹ï¼š</p><ul><li><p><strong><code>UIViewRepresentable</code> å’Œ <code>UIViewControllerRepresentable</code></strong>ï¼šè¿™ä¸¤ä¸ªåè®®æä¾›äº†æ¡¥æ¥ SwiftUI å’Œ UIKit/AppKit çš„æœºåˆ¶ã€‚ç¡®ä¿ä½ çš„ <code>updateUIView</code> æˆ– <code>updateUIViewController</code> æ–¹æ³•èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç† SwiftUI è§†å›¾çš„æ›´æ–°ã€‚</p></li><li><p><strong><code>EnvironmentObject</code> å’Œ <code>ObservedObject</code></strong>ï¼šä½¿ç”¨è¿™äº›å±æ€§åŒ…è£…å™¨æ¥ç®¡ç† SwiftUI è§†å›¾çš„çŠ¶æ€ã€‚å½“è¿™äº›çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒSwiftUI è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p></li><li><p><strong><code>invalidateIntrinsicContentSize()</code></strong>ï¼šå¦‚æœ SwiftUI è§†å›¾çš„å†…å®¹å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼Œä½ éœ€è¦è°ƒç”¨ <code>invalidateIntrinsicContentSize()</code> æ¥é€šçŸ¥ UIKit/AppKitã€‚</p></li></ul><h2 id="ç¤ºä¾‹ä»£ç ç‰‡æ®µ" tabindex="-1">ç¤ºä¾‹ä»£ç ç‰‡æ®µ <a class="header-anchor" href="#ç¤ºä¾‹ä»£ç ç‰‡æ®µ" aria-label="Permalink to &quot;ç¤ºä¾‹ä»£ç ç‰‡æ®µ&quot;">â€‹</a></h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨ UIKit ä¸­åµŒå…¥ SwiftUI è§†å›¾ï¼Œå¹¶ç®¡ç†å…¶å°ºå¯¸ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwiftUI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UIKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySwiftUIView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Counter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(counter)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Increment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UIViewController </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> viewDidLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viewDidLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> swiftUIView </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MySwiftUIView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hostingController </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UIHostingController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rootView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: swiftUIView)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        addChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hostingController)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        view.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addSubview</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">didMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.translatesAutoresizingMaskIntoConstraints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        NSLayoutConstraint.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">activate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.topAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.topAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.leadingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.leadingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.trailingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.trailingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.bottomAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.bottomAnchor)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="æœ€ä½³å®è·µ" tabindex="-1">æœ€ä½³å®è·µ <a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-label="Permalink to &quot;æœ€ä½³å®è·µ&quot;">â€‹</a></h2><ul><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…ä¸å¿…è¦çš„ SwiftUI è§†å›¾æ›´æ–°ã€‚ä½¿ç”¨ <code>EquatableView</code> æˆ– <code>shouldUpdateUIView</code> æ¥å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p></li><li><p><strong>å“åº”å¼è®¾è®¡</strong>ï¼šç¡®ä¿ä½ çš„ SwiftUI è§†å›¾èƒ½å¤Ÿé€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸å’Œæ–¹å‘ã€‚ä½¿ç”¨ <code>GeometryReader</code> æˆ– <code>SizeClass</code> æ¥å®ç°å“åº”å¼å¸ƒå±€ã€‚</p></li><li><p><strong>æµ‹è¯•</strong>ï¼š Thoroughly æµ‹è¯•ä½ çš„ SwiftUI è§†å›¾åœ¨ UIKit/AppKit ä¸­çš„é›†æˆï¼Œä»¥ç¡®ä¿å…¶è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</p></li></ul><p>é€šè¿‡æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°åœ¨ UIKit/AppKit åº”ç”¨ä¸­é›†æˆ SwiftUI è§†å›¾ï¼Œå¹¶æä¾›å“è¶Šçš„ç”¨æˆ·ä½“éªŒï¼ğŸ‰</p>`,15)]))}const c=i(t,[["render",p]]);export{o as __pageData,c as default};
