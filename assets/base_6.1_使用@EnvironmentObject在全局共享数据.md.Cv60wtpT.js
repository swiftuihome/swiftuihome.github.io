import{_ as i,c as n,o as a,ag as e}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ®","description":"","frontmatter":{},"headers":[],"relativePath":"base/6.1_ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ®.md","filePath":"base/6.1_ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ®.md"}'),t={name:"base/6.1_ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ®.md"};function l(p,s,h,r,k,d){return a(),n("div",null,s[0]||(s[0]=[e(`<h1 id="ä½¿ç”¨-environmentobjectåœ¨å…¨å±€å…±äº«æ•°æ®" tabindex="-1">ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ® <a class="header-anchor" href="#ä½¿ç”¨-environmentobjectåœ¨å…¨å±€å…±äº«æ•°æ®" aria-label="Permalink to &quot;ä½¿ç”¨@EnvironmentObjectåœ¨å…¨å±€å…±äº«æ•°æ®&quot;">â€‹</a></h1><p>åœ¨ SwiftUI ä¸­ï¼Œç®¡ç†å’Œå…±äº«æ•°æ®æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„å…³é”®ã€‚ å½“ä½ éœ€è¦è·¨å¤šä¸ªè§†å›¾å±‚çº§å…±äº«åŒä¸€ä¸ªæ•°æ®å¯¹è±¡æ—¶ï¼Œ<code>@EnvironmentObject</code> ç»å¯¹æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚ å®ƒèƒ½è®©ä½ è½»æ¾åœ°åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä¼ é€’æ•°æ®ï¼Œé¿å…äº†ç¹ççš„æ‰‹åŠ¨ä¼ é€’ã€‚</p><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-environmentobject" tabindex="-1">ä¸ºä»€ä¹ˆé€‰æ‹© @EnvironmentObjectï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-environmentobject" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆé€‰æ‹© @EnvironmentObjectï¼Ÿ&quot;">â€‹</a></h2><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„åº”ç”¨æœ‰ä¸€ä¸ªç”¨æˆ·è®¾ç½®å¯¹è±¡ï¼Œå¾ˆå¤šè§†å›¾éƒ½éœ€è¦è®¿é—®å®ƒã€‚ å¦‚æœä½ ä½¿ç”¨ <code>@ObservedObject</code> æˆ– <code>@StateObject</code>ï¼Œä½ å¯èƒ½éœ€è¦ä¸€å±‚ä¸€å±‚åœ°ä¼ é€’è¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¼šå˜å¾—éå¸¸éº»çƒ¦ã€‚ ğŸ˜… <code>EnvironmentObject</code> å°±åƒä¸€ä¸ªé­”æ³•é€šé“ï¼Œè®©æ•°æ®ç›´æ¥åˆ°è¾¾éœ€è¦å®ƒçš„è§†å›¾ã€‚</p><blockquote><p>ä½¿ç”¨ <code>@EnvironmentObject</code> å¯ä»¥æ˜¾è‘—å‡å°‘ä»£ç é‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘çº¦ 30% çš„æ•°æ®ä¼ é€’ç›¸å…³ä»£ç ã€‚</p></blockquote><h2 id="å¦‚ä½•ä½¿ç”¨-environmentobject" tabindex="-1">å¦‚ä½•ä½¿ç”¨ @EnvironmentObjectï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-environmentobject" aria-label="Permalink to &quot;å¦‚ä½•ä½¿ç”¨ @EnvironmentObjectï¼Ÿ&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ä¸ªç¬¦åˆ <code>ObservableObject</code> åè®®çš„ç±»ï¼Œå¹¶ä¸”å®ƒçš„å±æ€§éœ€è¦ç”¨ <code>@Published</code> æ ‡è®°ã€‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Guest&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„åº”ç”¨å…¥å£æˆ–è€…æŸä¸ªçˆ¶è§†å›¾ä¸­ï¼Œä½¿ç”¨ <code>.environmentObject()</code> ä¿®é¥°ç¬¦æ³¨å…¥è¿™ä¸ªå¯¹è±¡ã€‚ æ¯”å¦‚åœ¨ <code>App</code> ç»“æ„ä½“ä¸­ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@main</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">App </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @StateObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> settings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UserSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Scene {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        WindowGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">environmentObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(settings)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="åœ¨è§†å›¾ä¸­è®¿é—®ç¯å¢ƒå¯¹è±¡" tabindex="-1">åœ¨è§†å›¾ä¸­è®¿é—®ç¯å¢ƒå¯¹è±¡ <a class="header-anchor" href="#åœ¨è§†å›¾ä¸­è®¿é—®ç¯å¢ƒå¯¹è±¡" aria-label="Permalink to &quot;åœ¨è§†å›¾ä¸­è®¿é—®ç¯å¢ƒå¯¹è±¡&quot;">â€‹</a></h2><p>ç°åœ¨ï¼Œä»»ä½•å­è§†å›¾éƒ½å¯ä»¥é€šè¿‡ <code>@EnvironmentObject</code> å±æ€§åŒ…è£…å™¨æ¥è®¿é—® <code>UserSettings</code> å¯¹è±¡äº†ã€‚ ä½ ä¸éœ€è¦åœ¨è§†å›¾çš„åˆå§‹åŒ–å™¨ä¸­ä¼ é€’å®ƒï¼ŒSwiftUI ä¼šè‡ªåŠ¨ä¸ºä½ æä¾›ã€‚ çœŸæ˜¯å¤ªæ–¹ä¾¿äº†ï¼ ğŸ¥³</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProfileView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @EnvironmentObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> settings: UserSettings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·å: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(settings.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">username</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æ•°: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(settings.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">score</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢åŠ åˆ†æ•°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                settings.score </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹" tabindex="-1">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><ul><li><strong>æ³¨å…¥ä½ç½®ï¼š</strong> é€šå¸¸åœ¨åº”ç”¨çš„æœ€é¡¶å±‚æ³¨å…¥ <code>EnvironmentObject</code>ï¼Œè¿™æ ·æ‰€æœ‰å­è§†å›¾éƒ½èƒ½è®¿é—®åˆ°ã€‚</li><li><strong>ç±»å‹åŒ¹é…ï¼š</strong> ç¡®ä¿ä½ æ³¨å…¥å’Œæ¥æ”¶çš„ <code>EnvironmentObject</code> ç±»å‹æ˜¯åŒ¹é…çš„ã€‚ å¦‚æœç±»å‹ä¸åŒ¹é…ï¼Œåº”ç”¨ä¼šå´©æºƒã€‚</li><li><strong>å¯é€‰æ€§ï¼š</strong> å¦‚æœæŸä¸ªè§†å›¾ä¸ç¡®å®šæ˜¯å¦ä¼šæ”¶åˆ° <code>EnvironmentObject</code>ï¼Œä½ å¯ä»¥å°†å…¶å£°æ˜ä¸ºå¯é€‰ç±»å‹ï¼š<code>@EnvironmentObject var settings: UserSettings?</code>ã€‚</li><li><strong>æ€§èƒ½ï¼š</strong> <code>EnvironmentObject</code> çš„æ›´æ–°ä¼šè§¦å‘ä¾èµ–å®ƒçš„è§†å›¾é‡æ–°æ¸²æŸ“ï¼Œä½† SwiftUI çš„ä¼˜åŒ–æœºåˆ¶ä¼šç¡®ä¿æ€§èƒ½è‰¯å¥½ã€‚ ğŸš€</li></ul><p>é€šè¿‡æŒæ¡ <code>@EnvironmentObject</code>ï¼Œä½ å°†èƒ½å¤Ÿæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆåœ°ç®¡ç† SwiftUI åº”ç”¨ä¸­çš„å…¨å±€æ•°æ®ã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œèƒ½è®©ä½ çš„ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚ æŒç»­å­¦ä¹ ï¼Œä½ ä¸€å®šä¼šæˆä¸º SwiftUI å¤§å¸ˆï¼ ğŸ’ª</p>`,16)]))}const o=i(t,[["render",l]]);export{E as __pageData,o as default};
