import{_ as a,c as i,o as n,ag as e}from"./chunks/framework.Bw-5EFTY.js";const b=JSON.parse('{"title":"åˆ›å»ºStoreManagerä½œä¸ºObservableObject","description":"","frontmatter":{},"headers":[],"relativePath":"purchase/8.1_åˆ›å»ºStoreManagerä½œä¸ºObservableObject.md","filePath":"purchase/8.1_åˆ›å»ºStoreManagerä½œä¸ºObservableObject.md"}'),l={name:"purchase/8.1_åˆ›å»ºStoreManagerä½œä¸ºObservableObject.md"};function p(t,s,r,h,k,d){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="åˆ›å»ºstoremanagerä½œä¸ºobservableobject" tabindex="-1">åˆ›å»ºStoreManagerä½œä¸ºObservableObject <a class="header-anchor" href="#åˆ›å»ºstoremanagerä½œä¸ºobservableobject" aria-label="Permalink to &quot;åˆ›å»ºStoreManagerä½œä¸ºObservableObject&quot;">â€‹</a></h1><p>è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢å¦‚ä½•åˆ›å»º <code>StoreManager</code>ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º <code>ObservableObject</code>ï¼Œä»¥ä¾¿åœ¨ä½ çš„ SwiftUI åº”ç”¨ä¸­è½»æ¾ç®¡ç†è®¢é˜…çŠ¶æ€ï¼ğŸš€</p><h2 id="åˆ›å»º-storemanager-ç±»" tabindex="-1">åˆ›å»º StoreManager ç±» <a class="header-anchor" href="#åˆ›å»º-storemanager-ç±»" aria-label="Permalink to &quot;åˆ›å»º StoreManager ç±»&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º <code>StoreManager</code> çš„ç±»ã€‚è¿™ä¸ªç±»å°†è´Ÿè´£å¤„ç†æ‰€æœ‰ä¸ StoreKit ç›¸å…³çš„é€»è¾‘ï¼Œä¾‹å¦‚è·å–äº§å“ä¿¡æ¯ã€å¤„ç†è´­ä¹°ä»¥åŠéªŒè¯è®¢é˜…çŠ¶æ€ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="éµå¾ª-observableobject-åè®®" tabindex="-1">éµå¾ª ObservableObject åè®® <a class="header-anchor" href="#éµå¾ª-observableobject-åè®®" aria-label="Permalink to &quot;éµå¾ª ObservableObject åè®®&quot;">â€‹</a></h2><p>ä¸ºäº†è®© SwiftUI è§†å›¾èƒ½å¤Ÿè§‚å¯Ÿåˆ° <code>StoreManager</code> çš„çŠ¶æ€å˜åŒ–ï¼Œä½ éœ€è¦è®©å®ƒéµå¾ª <code>ObservableObject</code> åè®®ã€‚è¿™éå¸¸ç®€å•ï¼Œåªéœ€åœ¨ç±»å®šä¹‰ä¸­æ·»åŠ å³å¯ã€‚ğŸ‰</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="æ·»åŠ -published-å±æ€§" tabindex="-1">æ·»åŠ  Published å±æ€§ <a class="header-anchor" href="#æ·»åŠ -published-å±æ€§" aria-label="Permalink to &quot;æ·»åŠ  Published å±æ€§&quot;">â€‹</a></h2><p>ç°åœ¨ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€äº› <code>@Published</code> å±æ€§æ¥å­˜å‚¨ä½ çš„è®¢é˜…ç›¸å…³æ•°æ®ã€‚æ¯å½“è¿™äº›å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰è§‚å¯Ÿè¯¥ <code>StoreManager</code> çš„ SwiftUI è§†å›¾éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä½¿å¾— UI èƒ½å¤Ÿå®æ—¶åæ˜ è®¢é˜…çŠ¶æ€ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯ä»¥æ·»åŠ çš„å±æ€§ç¤ºä¾‹ï¼š</p><ul><li><code>@Published var products: [Product] = []</code>ï¼šå­˜å‚¨ä» StoreKit è·å–çš„äº§å“åˆ—è¡¨ã€‚</li><li><code>@Published var purchasedSubscriptions: [String] = []</code>ï¼šå­˜å‚¨ç”¨æˆ·å·²è´­ä¹°çš„è®¢é˜… ID åˆ—è¡¨ã€‚</li><li><code>@Published var isSubscribed: Bool = false</code>ï¼šè¡¨ç¤ºç”¨æˆ·æ˜¯å¦å·²è®¢é˜…ã€‚</li></ul><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> products: [Product] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> purchasedSubscriptions: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isSubscribed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="å®ç°åˆå§‹åŒ–æ–¹æ³•" tabindex="-1">å®ç°åˆå§‹åŒ–æ–¹æ³• <a class="header-anchor" href="#å®ç°åˆå§‹åŒ–æ–¹æ³•" aria-label="Permalink to &quot;å®ç°åˆå§‹åŒ–æ–¹æ³•&quot;">â€‹</a></h2><p>æœ€åï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•æ¥è®¾ç½® <code>StoreManager</code> çš„åˆå§‹çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨ StoreKit API æ¥è·å–äº§å“ä¿¡æ¯ï¼Œæˆ–è€…éªŒè¯ç”¨æˆ·çš„è®¢é˜…çŠ¶æ€ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> products: [Product] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> purchasedSubscriptions: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isSubscribed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // åœ¨è¿™é‡Œæ·»åŠ ä½ çš„åˆå§‹åŒ–ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¾‹å¦‚ï¼Œè·å–äº§å“ä¿¡æ¯ï¼ŒéªŒè¯è®¢é˜…çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ª <code>StoreManager</code> ç±»ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º <code>ObservableObject</code>ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ SwiftUI è§†å›¾ä¸­ä½¿ç”¨ <code>@StateObject</code> æ¥ç®¡ç† <code>StoreManager</code>ï¼Œå¹¶æ ¹æ®è®¢é˜…çŠ¶æ€åŠ¨æ€æ˜¾ç¤º/éšè— UI å…ƒç´ ã€‚ ğŸ¥³</p>`,17)]))}const o=a(l,[["render",p]]);export{b as __pageData,o as default};
