import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.ymCRTBvy.js";const c=JSON.parse('{"title":"åˆ›å»º ViewModel ä½œä¸º ObservableObject","description":"","frontmatter":{},"headers":[],"relativePath":"refactor/13.1_åˆ›å»º`ViewModel`ä½œä¸º`ObservableObject`.md","filePath":"refactor/13.1_åˆ›å»º`ViewModel`ä½œä¸º`ObservableObject`.md"}'),l={name:"refactor/13.1_åˆ›å»º`ViewModel`ä½œä¸º`ObservableObject`.md"};function p(t,s,h,r,k,d){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="åˆ›å»º-viewmodel-ä½œä¸º-observableobject" tabindex="-1">åˆ›å»º ViewModel ä½œä¸º ObservableObject <a class="header-anchor" href="#åˆ›å»º-viewmodel-ä½œä¸º-observableobject" aria-label="Permalink to &quot;åˆ›å»º ViewModel ä½œä¸º ObservableObject&quot;">â€‹</a></h1><p>åœ¨ SwiftUI ä¸­ï¼Œä½¿ç”¨ MVVM (Model-View-ViewModel) æ¶æ„å¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚è€Œ <code>ViewModel</code> åœ¨ MVVM ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚å®ƒè´Ÿè´£å¤„ç†è§†å›¾çš„ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ï¼Œå¹¶å°†æ•°æ®ä¼ é€’ç»™è§†å›¾è¿›è¡Œå±•ç¤ºã€‚åˆ›å»ºä¸€ä¸ª <code>ViewModel</code> å¹¶ä½¿å…¶éµå¾ª <code>ObservableObject</code> åè®®ï¼Œæ˜¯å®ç° MVVM çš„å…³é”®ä¸€æ­¥ã€‚ğŸ‰</p><p><code>ObservableObject</code> æ˜¯ SwiftUI æä¾›çš„ä¸€ä¸ªåè®®ï¼Œå®ƒå…è®¸ <code>ViewModel</code> å°†å…¶çŠ¶æ€å˜åŒ–é€šçŸ¥ç»™è§†å›¾ã€‚å½“ <code>ViewModel</code> çš„å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä»è€Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™æå¤§åœ°ç®€åŒ–äº†æ•°æ®ç»‘å®šå’ŒçŠ¶æ€ç®¡ç†ã€‚</p><h2 id="å¦‚ä½•åˆ›å»º-observableobject-viewmodel" tabindex="-1">å¦‚ä½•åˆ›å»º ObservableObject ViewModelï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•åˆ›å»º-observableobject-viewmodel" aria-label="Permalink to &quot;å¦‚ä½•åˆ›å»º ObservableObject ViewModelï¼Ÿ&quot;">â€‹</a></h2><ol><li><p><strong>å®šä¹‰ ViewModel ç±»ï¼š</strong> é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç±»æ¥è¡¨ç¤ºä½ çš„ <code>ViewModel</code>ã€‚è¿™ä¸ªç±»å°†åŒ…å«è§†å›¾æ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ViewModel çš„å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><strong>éµå¾ª ObservableObject åè®®ï¼š</strong> è®©ä½ çš„ <code>ViewModel</code> ç±»éµå¾ª <code>ObservableObject</code> åè®®ã€‚è¿™ä¼šè‡ªåŠ¨ä¸ºä½ çš„ <code>ViewModel</code> æ·»åŠ å¿…è¦çš„æœºåˆ¶ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å‘å¸ƒçŠ¶æ€å˜åŒ–ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ViewModel çš„å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><strong>ä½¿ç”¨ @Published å±æ€§åŒ…è£…å™¨ï¼š</strong> ä½¿ç”¨ <code>@Published</code> å±æ€§åŒ…è£…å™¨æ¥æ ‡è®°é‚£äº›éœ€è¦è¢«è§†å›¾è§‚å¯Ÿçš„å±æ€§ã€‚å½“è¿™äº›å±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ<code>ViewModel</code> ä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ï¼ˆé€šå¸¸æ˜¯è§†å›¾ï¼‰ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello, SwiftUI!&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h2 id="viewmodel-çš„ä¼˜åŠ¿" tabindex="-1">ViewModel çš„ä¼˜åŠ¿ <a class="header-anchor" href="#viewmodel-çš„ä¼˜åŠ¿" aria-label="Permalink to &quot;ViewModel çš„ä¼˜åŠ¿&quot;">â€‹</a></h2><ul><li><strong>ä»£ç åˆ†ç¦»ï¼š</strong> å°†è§†å›¾é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li><li><strong>å¯æµ‹è¯•æ€§ï¼š</strong> <code>ViewModel</code> å¯ä»¥ç‹¬ç«‹äºè§†å›¾è¿›è¡Œæµ‹è¯•ï¼Œæé«˜ä»£ç çš„è´¨é‡ã€‚</li><li><strong>å¯é‡ç”¨æ€§ï¼š</strong> <code>ViewModel</code> å¯ä»¥åœ¨å¤šä¸ªè§†å›¾ä¸­é‡ç”¨ï¼Œå‡å°‘ä»£ç çš„é‡å¤ã€‚</li><li><strong>å“åº”å¼æ›´æ–°ï¼š</strong> è§†å›¾å¯ä»¥è‡ªåŠ¨å“åº” <code>ViewModel</code> çš„çŠ¶æ€å˜åŒ–ï¼Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚</li></ul><h2 id="ç¤ºä¾‹ä»£ç " tabindex="-1">ç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-label="Permalink to &quot;ç¤ºä¾‹ä»£ç &quot;">â€‹</a></h2><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> counter: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> incrementCounter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @StateObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ContentViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Counter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(viewModel.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">counter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Increment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                viewModel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">incrementCounter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>ContentViewModel</code> æ˜¯ä¸€ä¸ª <code>ObservableObject</code>ï¼Œå®ƒåŒ…å«ä¸€ä¸ª <code>@Published</code> å±æ€§ <code>counter</code>ã€‚å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>incrementCounter()</code> æ–¹æ³•ä¼šå¢åŠ  <code>counter</code> çš„å€¼ï¼Œå¹¶ä¸”è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼ŸğŸš€</p><p>é€šè¿‡åˆ›å»º <code>ViewModel</code> ä½œä¸º <code>ObservableObject</code>ï¼Œä½ å¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä½ çš„ SwiftUI ä»£ç ï¼Œå¹¶æ„å»ºæ›´å¯ç»´æŠ¤å’Œå¯æµ‹è¯•çš„åº”ç”¨ç¨‹åºã€‚è®°ä½ï¼Œè‰¯å¥½çš„æ¶æ„æ˜¯æ„å»ºæˆåŠŸåº”ç”¨çš„å…³é”®ï¼ğŸ’ª</p>`,11)]))}const b=i(l,[["render",p]]);export{c as __pageData,b as default};
