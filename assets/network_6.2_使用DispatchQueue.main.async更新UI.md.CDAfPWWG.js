import{_ as a,c as i,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI","description":"","frontmatter":{},"headers":[],"relativePath":"network/6.2_ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI.md","filePath":"network/6.2_ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI.md"}'),l={name:"network/6.2_ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI.md"};function p(t,s,h,k,r,d){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="ä½¿ç”¨dispatchqueue-main-asyncæ›´æ–°ui" tabindex="-1">ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI <a class="header-anchor" href="#ä½¿ç”¨dispatchqueue-main-asyncæ›´æ–°ui" aria-label="Permalink to &quot;ä½¿ç”¨DispatchQueue.main.asyncæ›´æ–°UI&quot;">â€‹</a></h1><p>åœ¨SwiftUIä¸­ï¼Œæ›´æ–°ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰æ—¶ï¼Œç¡®ä¿åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ˜¯è‡³å…³é‡è¦çš„ã€‚ä½¿ç”¨<code>DispatchQueue.main.async</code>å¯ä»¥å¸®åŠ©ä½ åœ¨ä¸»çº¿ç¨‹ä¸Šå®‰å…¨åœ°æ›´æ–°UIã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‚¹å’Œç¤ºä¾‹ï¼Œå¸®åŠ©ä½ ç†è§£å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨è¿™ä¸€åŠŸèƒ½ã€‚</p><h2 id="_1-ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°ui" tabindex="-1">1. ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIï¼Ÿ <a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°ui" aria-label="Permalink to &quot;1. ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIï¼Ÿ&quot;">â€‹</a></h2><ul><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šUIæ›´æ–°å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œï¼Œä»¥é¿å…æ½œåœ¨çš„å´©æºƒæˆ–ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚</li><li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šåœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIå¯ä»¥ç¡®ä¿ç”¨æˆ·ç•Œé¢å“åº”è¿…é€Ÿï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</li></ul><h2 id="_2-ä½¿ç”¨dispatchqueue-main-asyncçš„åŸºæœ¬è¯­æ³•" tabindex="-1">2. ä½¿ç”¨DispatchQueue.main.asyncçš„åŸºæœ¬è¯­æ³• <a class="header-anchor" href="#_2-ä½¿ç”¨dispatchqueue-main-asyncçš„åŸºæœ¬è¯­æ³•" aria-label="Permalink to &quot;2. ä½¿ç”¨DispatchQueue.main.asyncçš„åŸºæœ¬è¯­æ³•&quot;">â€‹</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œä»£ç ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DispatchQueue.main.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨è¿™é‡Œæ›´æ–°UI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-ç¤ºä¾‹-ä»ç½‘ç»œè·å–æ•°æ®å¹¶æ›´æ–°ui" tabindex="-1">3. ç¤ºä¾‹ï¼šä»ç½‘ç»œè·å–æ•°æ®å¹¶æ›´æ–°UI <a class="header-anchor" href="#_3-ç¤ºä¾‹-ä»ç½‘ç»œè·å–æ•°æ®å¹¶æ›´æ–°ui" aria-label="Permalink to &quot;3. ç¤ºä¾‹ï¼šä»ç½‘ç»œè·å–æ•°æ®å¹¶æ›´æ–°UI&quot;">â€‹</a></h2><p>å‡è®¾ä½ æ­£åœ¨ä»ç½‘ç»œè·å–æ•°æ®ï¼Œå¹¶å¸Œæœ›åœ¨è·å–æ•°æ®åæ›´æ–°UIã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    URLSession.shared.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dataTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com/data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { data, response, error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // è§£ææ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parsedData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> parseData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            DispatchQueue.main.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">updateUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parsedData)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">resume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_4-å¤„ç†uiæ›´æ–°çš„æœ€ä½³å®è·µ" tabindex="-1">4. å¤„ç†UIæ›´æ–°çš„æœ€ä½³å®è·µ <a class="header-anchor" href="#_4-å¤„ç†uiæ›´æ–°çš„æœ€ä½³å®è·µ" aria-label="Permalink to &quot;4. å¤„ç†UIæ›´æ–°çš„æœ€ä½³å®è·µ&quot;">â€‹</a></h2><ul><li><strong>é¿å…é•¿æ—¶é—´æ“ä½œ</strong>ï¼šç¡®ä¿åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ä»£ç å°½é‡ç®€çŸ­ï¼Œé¿å…é˜»å¡UIã€‚</li><li><strong>ä½¿ç”¨çŠ¶æ€ç®¡ç†</strong>ï¼šç»“åˆ<code>@State</code>æˆ–<code>@Published</code>ç­‰å±æ€§ï¼Œç¡®ä¿UIèƒ½è‡ªåŠ¨å“åº”æ•°æ®å˜åŒ–ã€‚</li></ul><h2 id="_5-å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€" tabindex="-1">5. å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€ <a class="header-anchor" href="#_5-å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€" aria-label="Permalink to &quot;5. å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€&quot;">â€‹</a></h2><p>åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¤„ç†é”™è¯¯å’Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€åŒæ ·é‡è¦ã€‚ä½ å¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIä»¥æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨æˆ–é”™è¯¯æ¶ˆæ¯ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DispatchQueue.main.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isLoading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // åœæ­¢åŠ è½½æŒ‡ç¤ºå™¨</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.errorMessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•ã€‚&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_6-æ€»ç»“" tabindex="-1">6. æ€»ç»“ <a class="header-anchor" href="#_6-æ€»ç»“" aria-label="Permalink to &quot;6. æ€»ç»“&quot;">â€‹</a></h2><p>ä½¿ç”¨<code>DispatchQueue.main.async</code>æ˜¯ç¡®ä¿UIæ›´æ–°å®‰å…¨å’Œé«˜æ•ˆçš„å…³é”®ã€‚é€šè¿‡åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒUIæ›´æ–°ï¼Œä½ å¯ä»¥æå‡åº”ç”¨çš„ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚è®°ä½ï¼Œè‰¯å¥½çš„UIæ›´æ–°å®è·µä¸ä»…èƒ½æé«˜åº”ç”¨çš„æ€§èƒ½ï¼Œè¿˜èƒ½è®©ç”¨æˆ·æ„Ÿå—åˆ°æ›´æµç•…çš„äº¤äº’ä½“éªŒã€‚ğŸ’ªâœ¨</p><p>é€šè¿‡æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å°†èƒ½å¤Ÿæ›´è‡ªä¿¡åœ°å¤„ç†SwiftUIä¸­çš„UIæ›´æ–°ï¼Œåˆ›é€ å‡ºæ›´ä¼˜ç§€çš„åº”ç”¨ï¼</p>`,18)]))}const u=a(l,[["render",p]]);export{E as __pageData,u as default};
