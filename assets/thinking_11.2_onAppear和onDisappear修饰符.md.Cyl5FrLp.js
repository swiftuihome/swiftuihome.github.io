import{_ as i,c as a,o as n,ag as p}from"./chunks/framework.ymCRTBvy.js";const c=JSON.parse('{"title":"onAppearå’ŒonDisappearä¿®é¥°ç¬¦","description":"","frontmatter":{},"headers":[],"relativePath":"thinking/11.2_onAppearå’ŒonDisappearä¿®é¥°ç¬¦.md","filePath":"thinking/11.2_onAppearå’ŒonDisappearä¿®é¥°ç¬¦.md"}'),l={name:"thinking/11.2_onAppearå’ŒonDisappearä¿®é¥°ç¬¦.md"};function e(h,s,t,k,r,E){return n(),a("div",null,s[0]||(s[0]=[p(`<h1 id="onappearå’Œondisappearä¿®é¥°ç¬¦" tabindex="-1">onAppearå’ŒonDisappearä¿®é¥°ç¬¦ <a class="header-anchor" href="#onappearå’Œondisappearä¿®é¥°ç¬¦" aria-label="Permalink to &quot;onAppearå’ŒonDisappearä¿®é¥°ç¬¦&quot;">â€‹</a></h1><blockquote><p>åœ¨SwiftUIä¸­ï¼Œ<code>onAppear</code>å’Œ<code>onDisappear</code>ä¿®é¥°ç¬¦æ˜¯ç®¡ç†è§†å›¾ç”Ÿå‘½å‘¨æœŸçš„é‡è¦å·¥å…·ã€‚å®ƒä»¬å…è®¸ä½ åœ¨è§†å›¾å‡ºç°æˆ–æ¶ˆå¤±æ—¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚è¿™å¯¹äºå¤„ç†æ•°æ®åŠ è½½ã€åŠ¨ç”»æˆ–å…¶ä»–éœ€è¦åœ¨è§†å›¾çŠ¶æ€å˜åŒ–æ—¶è§¦å‘çš„ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚</p></blockquote><h2 id="ä½¿ç”¨onappear" tabindex="-1">ä½¿ç”¨onAppear <a class="header-anchor" href="#ä½¿ç”¨onappear" aria-label="Permalink to &quot;ä½¿ç”¨onAppear&quot;">â€‹</a></h2><p><code>onAppear</code>ä¿®é¥°ç¬¦åœ¨è§†å›¾å‡ºç°åœ¨å±å¹•ä¸Šæ—¶è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>æ•°æ®åŠ è½½</strong>ï¼šä»ç½‘ç»œæˆ–æœ¬åœ°æ•°æ®åº“è·å–æ•°æ®ã€‚</li><li><strong>å¼€å§‹åŠ¨ç”»</strong>ï¼šå¯åŠ¨è§†å›¾ä¸­çš„åŠ¨ç”»æ•ˆæœã€‚</li><li><strong>è®°å½•äº‹ä»¶</strong>ï¼šè·Ÿè¸ªç”¨æˆ·è¡Œä¸ºæˆ–åˆ†ææ•°æ®ã€‚</li></ul><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: \\.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onAppear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ¨¡æ‹Ÿæ•°æ®åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Item 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Item 2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Item 3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“<code>ContentView</code>å‡ºç°åœ¨å±å¹•ä¸Šæ—¶ï¼Œ<code>loadData</code>å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œä»è€ŒåŠ è½½æ•°æ®å¹¶æ›´æ–°è§†å›¾ã€‚</p><h2 id="ä½¿ç”¨ondisappear" tabindex="-1">ä½¿ç”¨onDisappear <a class="header-anchor" href="#ä½¿ç”¨ondisappear" aria-label="Permalink to &quot;ä½¿ç”¨onDisappear&quot;">â€‹</a></h2><p><code>onDisappear</code>ä¿®é¥°ç¬¦åœ¨è§†å›¾ä»å±å¹•ä¸Šæ¶ˆå¤±æ—¶è¢«è°ƒç”¨ã€‚å®ƒå¯ä»¥ç”¨äºæ¸…ç†æ“ä½œï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>åœæ­¢åŠ¨ç”»</strong>ï¼šåœ¨è§†å›¾æ¶ˆå¤±æ—¶åœæ­¢ä»»ä½•è¿›è¡Œä¸­çš„åŠ¨ç”»ã€‚</li><li><strong>ä¿å­˜çŠ¶æ€</strong>ï¼šä¿å­˜ç”¨æˆ·è¾“å…¥æˆ–å…¶ä»–çŠ¶æ€ä¿¡æ¯ã€‚</li><li><strong>å–æ¶ˆç½‘ç»œè¯·æ±‚</strong>ï¼šåœ¨è§†å›¾æ¶ˆå¤±æ—¶å–æ¶ˆä»»ä½•æœªå®Œæˆçš„ç½‘ç»œè¯·æ±‚ã€‚</li></ul><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isAnimating </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scaleEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isAnimating </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onAppear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                isAnimating </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onDisappear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                isAnimating </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“è§†å›¾å‡ºç°æ—¶ï¼Œæ–‡æœ¬ä¼šæ”¾å¤§ï¼›å½“è§†å›¾æ¶ˆå¤±æ—¶ï¼Œæ–‡æœ¬ä¼šæ¢å¤åˆ°åŸå§‹å¤§å°ã€‚</p><h2 id="ç»“åˆä½¿ç”¨" tabindex="-1">ç»“åˆä½¿ç”¨ <a class="header-anchor" href="#ç»“åˆä½¿ç”¨" aria-label="Permalink to &quot;ç»“åˆä½¿ç”¨&quot;">â€‹</a></h2><p>ä½ å¯ä»¥åŒæ—¶ä½¿ç”¨<code>onAppear</code>å’Œ<code>onDisappear</code>æ¥ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªè§†å›¾ä¸­åŠ è½½æ•°æ®å¹¶åœ¨è§†å›¾æ¶ˆå¤±æ—¶æ¸…ç†èµ„æºï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: \\.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onAppear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onDisappear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            cleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ•°æ®åŠ è½½é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ¸…ç†é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p><code>onAppear</code>å’Œ<code>onDisappear</code>ä¿®é¥°ç¬¦ä¸ºSwiftUIæä¾›äº†å¼ºå¤§çš„è§†å›¾ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ã€‚é€šè¿‡åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ï¼Œä½ å¯ä»¥ç¡®ä¿åœ¨è§†å›¾çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œå¿…è¦çš„æ“ä½œï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨æ€§èƒ½ã€‚ğŸ‰</p>`,19)]))}const g=i(l,[["render",e]]);export{c as __pageData,g as default};
