import{_ as i,c as n,o as a,ag as e}from"./chunks/framework.ymCRTBvy.js";const o=JSON.parse('{"title":"@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®","description":"","frontmatter":{},"headers":[],"relativePath":"thinking/4.5_@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®.md","filePath":"thinking/4.5_@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®.md"}'),t={name:"thinking/4.5_@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®.md"};function l(p,s,h,k,r,d){return a(),n("div",null,s[0]||(s[0]=[e(`<h1 id="environmentobject-åœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®" tabindex="-1">@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ® <a class="header-anchor" href="#environmentobject-åœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®" aria-label="Permalink to &quot;@EnvironmentObjectï¼šåœ¨è§†å›¾å±‚çº§ä¸­å…±äº«æ•°æ®&quot;">â€‹</a></h1><blockquote><p>åœ¨ SwiftUI ä¸­ï¼Œ<code>@EnvironmentObject</code> å…è®¸ä½ åœ¨æ•´ä¸ªè§†å›¾å±‚çº§ä¸­è½»æ¾å…±äº«æ•°æ®ã€‚è¿™å¯¹äºä¼ é€’åº”ç”¨çº§åˆ«çš„çŠ¶æ€æˆ–é…ç½®ä¿¡æ¯éå¸¸æœ‰ç”¨ï¼Œé¿å…äº†æ‰‹åŠ¨é€å±‚ä¼ é€’æ•°æ®çš„ç¹çã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå…¨å±€å¯è®¿é—®çš„â€œæ•°æ®ä¸­å¿ƒâ€ï¼Œä»»ä½•è§†å›¾éƒ½å¯ä»¥ä»ä¸­è·å–æ‰€éœ€çš„ä¿¡æ¯ã€‚</p></blockquote><h2 id="å¦‚ä½•ä½¿ç”¨-environmentobject-ğŸ› ï¸" tabindex="-1">å¦‚ä½•ä½¿ç”¨ @EnvironmentObject ğŸ› ï¸ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-environmentobject-ğŸ› ï¸" aria-label="Permalink to &quot;å¦‚ä½•ä½¿ç”¨ @EnvironmentObject ğŸ› ï¸&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªéµå¾ª <code>ObservableObject</code> åè®®çš„ç±»ã€‚è¿™ä¸ªç±»å°†æŒæœ‰ä½ æƒ³è¦å…±äº«çš„æ•°æ®ï¼Œå¹¶ä¸”å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è®¢é˜…çš„è§†å›¾ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> themeColor: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;light&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„ App ç»“æ„ä½“ä¸­ï¼Œä½¿ç”¨ <code>.environmentObject()</code> ä¿®é¥°ç¬¦å°† <code>AppSettings</code> çš„å®ä¾‹æ³¨å…¥åˆ°ç¯å¢ƒå½“ä¸­ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@main</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">App </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @StateObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> settings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AppSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Scene {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        WindowGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">environmentObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(settings)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç°åœ¨ï¼Œä»»ä½• <code>ContentView</code> åŠå…¶å­è§†å›¾éƒ½å¯ä»¥é€šè¿‡ <code>@EnvironmentObject</code> å±æ€§åŒ…è£…å™¨è®¿é—® <code>AppSettings</code> çš„å®ä¾‹ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @EnvironmentObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> settings: AppSettings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å½“å‰ä¸»é¢˜é¢œè‰²: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(settings.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">themeColor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">foregroundColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(settings.themeColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;light&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .black </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .white)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯-âœ¨" tabindex="-1">ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯ âœ¨ <a class="header-anchor" href="#ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯-âœ¨" aria-label="Permalink to &quot;ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯ âœ¨&quot;">â€‹</a></h2><ul><li><strong>ç®€åŒ–æ•°æ®ä¼ é€’</strong>ï¼šé¿å…äº†æ‰‹åŠ¨ä¼ é€’æ•°æ®çš„éº»çƒ¦ï¼Œä»£ç æ›´ç®€æ´ã€‚</li><li><strong>å…¨å±€çŠ¶æ€ç®¡ç†</strong>ï¼šæ–¹ä¾¿ç®¡ç†åº”ç”¨çº§åˆ«çš„çŠ¶æ€ï¼Œä¾‹å¦‚ç”¨æˆ·åå¥½è®¾ç½®ã€ç™»å½•çŠ¶æ€ç­‰ã€‚</li><li><strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼šå½“ <code>ObservableObject</code> ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰è®¢é˜…çš„è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>@EnvironmentObject</code> æ¥ç®¡ç†ï¼š</p><ol><li>ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ ğŸ”‘</li><li>åº”ç”¨çš„è¯­è¨€è®¾ç½® ğŸŒ</li><li>ä¸»é¢˜é¢œè‰² ğŸ¨</li><li>ç½‘ç»œè¯·æ±‚çš„å®¢æˆ·ç«¯å®ä¾‹ ğŸ“¡</li></ol><h2 id="æ³¨æ„äº‹é¡¹-ğŸ¤”" tabindex="-1">æ³¨æ„äº‹é¡¹ ğŸ¤” <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹-ğŸ¤”" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹ ğŸ¤”&quot;">â€‹</a></h2><ul><li>ç¡®ä¿åœ¨è§†å›¾å±‚çº§ä¸­æ­£ç¡®æ³¨å…¥äº† <code>EnvironmentObject</code>ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚</li><li><code>EnvironmentObject</code> é€‚ç”¨äºå…±äº«åº”ç”¨çº§åˆ«çš„çŠ¶æ€ï¼Œå¯¹äºå±€éƒ¨çŠ¶æ€ï¼Œä½¿ç”¨ <code>@State</code> æˆ– <code>@Binding</code> æ›´åˆé€‚ã€‚</li><li><code>@EnvironmentObject</code> ä¾èµ–äº <code>ObservableObject</code> åè®®ï¼Œå› æ­¤ä½ éœ€è¦ç¡®ä¿ä½ çš„æ•°æ®æ¨¡å‹éµå¾ªè¯¥åè®®ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>@EnvironmentObject</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç† SwiftUI åº”ç”¨ä¸­çš„æ•°æ®ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚ è®°ä½ï¼Œåˆç†åˆ©ç”¨å®ƒå¯ä»¥è®©ä½ çš„å¼€å‘å·¥ä½œäº‹åŠåŠŸå€ï¼ğŸ‰</p>`,16)]))}const E=i(t,[["render",l]]);export{o as __pageData,E as default};
