import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.Bw-5EFTY.js";const c=JSON.parse('{"title":"åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°","description":"","frontmatter":{},"headers":[],"relativePath":"network/8.1_åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°.md","filePath":"network/8.1_åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°.md"}'),t={name:"network/8.1_åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°.md"};function h(p,s,e,k,r,E){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="åœ¨-taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°" tabindex="-1">åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•° <a class="header-anchor" href="#åœ¨-taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°" aria-label="Permalink to &quot;åœ¨.taskè§†å›¾ä¿®é¥°ç¬¦ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°&quot;">â€‹</a></h1><p>åœ¨SwiftUIä¸­ï¼Œä½¿ç”¨<code>.task</code>è§†å›¾ä¿®é¥°ç¬¦å¯ä»¥è½»æ¾åœ°åœ¨è§†å›¾ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—å¤„ç†å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ ç›´è§‚å’Œç®€æ´ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æœ‰æ•ˆä½¿ç”¨<code>.task</code>ä¿®é¥°ç¬¦çš„æ­¥éª¤å’Œç¤ºä¾‹ã€‚</p><h2 id="_1-åˆ›å»ºå¼‚æ­¥å‡½æ•°" tabindex="-1">1. åˆ›å»ºå¼‚æ­¥å‡½æ•° <a class="header-anchor" href="#_1-åˆ›å»ºå¼‚æ­¥å‡½æ•°" aria-label="Permalink to &quot;1. åˆ›å»ºå¼‚æ­¥å‡½æ•°&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æ˜¯ä»ç½‘ç»œè·å–æ•°æ®çš„æ“ä½œã€‚ä¾‹å¦‚ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> throws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Data {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com/data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> URLSession.shared.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-ä½¿ç”¨-taskä¿®é¥°ç¬¦" tabindex="-1">2. ä½¿ç”¨.taskä¿®é¥°ç¬¦ <a class="header-anchor" href="#_2-ä½¿ç”¨-taskä¿®é¥°ç¬¦" aria-label="Permalink to &quot;2. ä½¿ç”¨.taskä¿®é¥°ç¬¦&quot;">â€‹</a></h2><p>åœ¨SwiftUIè§†å›¾ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>.task</code>ä¿®é¥°ç¬¦æ¥è°ƒç”¨è¿™ä¸ªå¼‚æ­¥å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data: Data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errorMessage: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ•°æ®åŠ è½½æˆåŠŸ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errorMessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errorMessage {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é”™è¯¯: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(errorMessage)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŠ è½½ä¸­...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                errorMessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.localizedDescription</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_3-å¤„ç†çŠ¶æ€æ›´æ–°" tabindex="-1">3. å¤„ç†çŠ¶æ€æ›´æ–° <a class="header-anchor" href="#_3-å¤„ç†çŠ¶æ€æ›´æ–°" aria-label="Permalink to &quot;3. å¤„ç†çŠ¶æ€æ›´æ–°&quot;">â€‹</a></h2><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä½•ä½¿ç”¨<code>@State</code>å±æ€§æ¥ç®¡ç†è§†å›¾çš„çŠ¶æ€ã€‚é€šè¿‡åœ¨<code>.task</code>ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œæ‚¨å¯ä»¥åœ¨æ•°æ®åŠ è½½å®Œæˆåæ›´æ–°è§†å›¾ã€‚ç¡®ä¿åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIï¼Œä»¥é¿å…æ½œåœ¨çš„çº¿ç¨‹é—®é¢˜ã€‚</p><h2 id="_4-é”™è¯¯å¤„ç†" tabindex="-1">4. é”™è¯¯å¤„ç† <a class="header-anchor" href="#_4-é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;4. é”™è¯¯å¤„ç†&quot;">â€‹</a></h2><p>åœ¨å¼‚æ­¥æ“ä½œä¸­ï¼Œé”™è¯¯å¤„ç†æ˜¯è‡³å…³é‡è¦çš„ã€‚ä½¿ç”¨<code>do-catch</code>è¯­å¥å¯ä»¥æ•è·å¹¶å¤„ç†é”™è¯¯ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœ<code>fetchData</code>å‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œæ‚¨å¯ä»¥å°†é”™è¯¯ä¿¡æ¯å­˜å‚¨åœ¨<code>errorMessage</code>ä¸­ï¼Œå¹¶åœ¨è§†å›¾ä¸­æ˜¾ç¤ºã€‚</p><h2 id="_5-ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ" tabindex="-1">5. ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ <a class="header-anchor" href="#_5-ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ" aria-label="Permalink to &quot;5. ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ&quot;">â€‹</a></h2><p>ä½¿ç”¨<code>.task</code>ä¿®é¥°ç¬¦å¯ä»¥æé«˜ç”¨æˆ·ä½“éªŒã€‚æ‚¨å¯ä»¥åœ¨æ•°æ®åŠ è½½æ—¶æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼Œç¡®ä¿ç”¨æˆ·çŸ¥é“æ­£åœ¨è¿›è¡Œæ“ä½œã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥ä½¿åº”ç”¨ç¨‹åºæ›´åŠ å“åº”å’Œå‹å¥½ã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>ä½¿ç”¨<code>.task</code>è§†å›¾ä¿®é¥°ç¬¦è°ƒç”¨å¼‚æ­¥å‡½æ•°æ˜¯SwiftUIä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„å¼ºå¤§å·¥å…·ã€‚é€šè¿‡ç®€å•çš„ä»£ç ï¼Œæ‚¨å¯ä»¥è½»æ¾å®ç°æ•°æ®åŠ è½½ã€çŠ¶æ€ç®¡ç†å’Œé”™è¯¯å¤„ç†ã€‚æŒæ¡è¿™ä¸€ç‚¹ï¼Œå°†ä½¿æ‚¨çš„SwiftUIåº”ç”¨ç¨‹åºæ›´åŠ é«˜æ•ˆå’Œç”¨æˆ·å‹å¥½ï¼ğŸš€</p>`,16)]))}const g=i(t,[["render",h]]);export{c as __pageData,g as default};
