import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´","description":"","frontmatter":{},"headers":[],"relativePath":"network/5.3_ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´.md","filePath":"network/5.3_ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´.md"}'),l={name:"network/5.3_ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´.md"};function p(t,s,h,k,r,d){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ä½¿ç”¨-publishedå‘å¸ƒæ•°æ®å˜æ›´" tabindex="-1">ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´ <a class="header-anchor" href="#ä½¿ç”¨-publishedå‘å¸ƒæ•°æ®å˜æ›´" aria-label="Permalink to &quot;ä½¿ç”¨@Publishedå‘å¸ƒæ•°æ®å˜æ›´&quot;">â€‹</a></h1><p>åœ¨SwiftUIä¸­ï¼Œä½¿ç”¨<code>@Published</code>å±æ€§åŒ…è£…å™¨å¯ä»¥è½»æ¾åœ°ç®¡ç†å’Œå‘å¸ƒæ•°æ®å˜æ›´ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—è§†å›¾èƒ½å¤Ÿè‡ªåŠ¨å“åº”æ•°æ®çš„å˜åŒ–ï¼Œä»è€Œå®ç°åŠ¨æ€æ›´æ–°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‚¹ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•ä½¿ç”¨<code>@Published</code>ã€‚</p><h2 id="_1-å®šä¹‰observableobject" tabindex="-1">1. å®šä¹‰ObservableObject <a class="header-anchor" href="#_1-å®šä¹‰observableobject" aria-label="Permalink to &quot;1. å®šä¹‰ObservableObject&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªéµå¾ª<code>ObservableObject</code>åè®®çš„ç±»ã€‚è¿™ä¸ªç±»å°†åŒ…å«ä½ æƒ³è¦å‘å¸ƒçš„æ•°æ®ã€‚ä½¿ç”¨<code>@Published</code>æ ‡è®°é‚£äº›éœ€è¦è¢«è§‚å¯Ÿçš„å±æ€§ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwiftUI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Combine</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;åˆå§‹æ•°æ®&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_2-æ›´æ–°æ•°æ®" tabindex="-1">2. æ›´æ–°æ•°æ® <a class="header-anchor" href="#_2-æ›´æ–°æ•°æ®" aria-label="Permalink to &quot;2. æ›´æ–°æ•°æ®&quot;">â€‹</a></h2><p>å½“ä½ æ›´æ–°<code>@Published</code>å±æ€§æ—¶ï¼Œæ‰€æœ‰è®¢é˜…è¯¥å¯¹è±¡çš„è§†å›¾éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è§†å›¾ä¸­é€šè¿‡æŒ‰é’®ç‚¹å‡»æ¥æ”¹å˜æ•°æ®ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @StateObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(viewModel.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ›´æ–°æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                viewModel.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ›´æ–°åçš„æ•°æ®&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-è§†å›¾è‡ªåŠ¨æ›´æ–°" tabindex="-1">3. è§†å›¾è‡ªåŠ¨æ›´æ–° <a class="header-anchor" href="#_3-è§†å›¾è‡ªåŠ¨æ›´æ–°" aria-label="Permalink to &quot;3. è§†å›¾è‡ªåŠ¨æ›´æ–°&quot;">â€‹</a></h2><p>å½“<code>viewModel.data</code>çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>ContentView</code>ä¸­çš„<code>Text</code>è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§å“åº”å¼ç¼–ç¨‹æ¨¡å‹ä½¿å¾—æ•°æ®å’Œè§†å›¾ä¹‹é—´çš„å…³ç³»æ›´åŠ ç´§å¯†ï¼Œå‡å°‘äº†æ‰‹åŠ¨æ›´æ–°è§†å›¾çš„éœ€è¦ã€‚</p><h2 id="_4-ç»“åˆç½‘ç»œè¯·æ±‚" tabindex="-1">4. ç»“åˆç½‘ç»œè¯·æ±‚ <a class="header-anchor" href="#_4-ç»“åˆç½‘ç»œè¯·æ±‚" aria-label="Permalink to &quot;4. ç»“åˆç½‘ç»œè¯·æ±‚&quot;">â€‹</a></h2><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<code>@Published</code>å¸¸å¸¸ä¸ç½‘ç»œè¯·æ±‚ç»“åˆä½¿ç”¨ã€‚å½“ä»ç½‘ç»œè·å–æ•°æ®æ—¶ï¼Œå¯ä»¥å°†è·å–åˆ°çš„æ•°æ®èµ‹å€¼ç»™<code>@Published</code>å±æ€§ï¼Œä»è€Œè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DispatchQueue.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä»ç½‘ç»œè·å–çš„æ•°æ®&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DispatchQueue.main.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newData</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_5-è§‚å¯Ÿæ•°æ®å˜åŒ–" tabindex="-1">5. è§‚å¯Ÿæ•°æ®å˜åŒ– <a class="header-anchor" href="#_5-è§‚å¯Ÿæ•°æ®å˜åŒ–" aria-label="Permalink to &quot;5. è§‚å¯Ÿæ•°æ®å˜åŒ–&quot;">â€‹</a></h2><p>ä½ å¯ä»¥åœ¨è§†å›¾ä¸­ä½¿ç”¨<code>@ObservedObject</code>æ¥è§‚å¯Ÿ<code>ObservableObject</code>çš„å˜åŒ–ã€‚è¿™æ ·ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AnotherView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @ObservedObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel: ViewModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(viewModel.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-å°ç»“" tabindex="-1">6. å°ç»“ <a class="header-anchor" href="#_6-å°ç»“" aria-label="Permalink to &quot;6. å°ç»“&quot;">â€‹</a></h2><p>ä½¿ç”¨<code>@Published</code>å±æ€§åŒ…è£…å™¨å¯ä»¥æå¤§åœ°ç®€åŒ–æ•°æ®ç®¡ç†å’Œè§†å›¾æ›´æ–°çš„è¿‡ç¨‹ã€‚é€šè¿‡å°†æ•°æ®ä¸è§†å›¾ç»‘å®šï¼Œä½ å¯ä»¥åˆ›å»ºå‡ºæ›´åŠ åŠ¨æ€å’Œå“åº”å¼çš„ç”¨æˆ·ç•Œé¢ã€‚ğŸ’¡</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>è‡ªåŠ¨æ›´æ–°è§†å›¾</li><li>ç®€åŒ–æ•°æ®ç®¡ç†</li><li>æé«˜ä»£ç å¯è¯»æ€§</li></ul></li></ul><p>é€šè¿‡æŒæ¡<code>@Published</code>çš„ä½¿ç”¨ï¼Œä½ å°†èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°æ„å»ºSwiftUIåº”ç”¨ç¨‹åºï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ç»§ç»­æ¢ç´¢ï¼Œå®è·µè¿™äº›æ¦‚å¿µï¼Œä½ ä¼šå‘ç°SwiftUIçš„å¼ºå¤§ä¹‹å¤„ï¼ğŸš€</p>`,20)]))}const b=i(l,[["render",p]]);export{E as __pageData,b as default};
