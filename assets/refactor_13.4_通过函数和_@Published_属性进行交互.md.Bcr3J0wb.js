import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.Bw-5EFTY.js";const o=JSON.parse('{"title":"é€šè¿‡å‡½æ•°å’Œ@Publishedå±æ€§è¿›è¡Œäº¤äº’","description":"","frontmatter":{},"headers":[],"relativePath":"refactor/13.4_é€šè¿‡å‡½æ•°å’Œ`@Published`å±æ€§è¿›è¡Œäº¤äº’.md","filePath":"refactor/13.4_é€šè¿‡å‡½æ•°å’Œ`@Published`å±æ€§è¿›è¡Œäº¤äº’.md"}'),l={name:"refactor/13.4_é€šè¿‡å‡½æ•°å’Œ`@Published`å±æ€§è¿›è¡Œäº¤äº’.md"};function p(t,s,h,d,r,k){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="é€šè¿‡å‡½æ•°å’Œ-publishedå±æ€§è¿›è¡Œäº¤äº’" tabindex="-1">é€šè¿‡å‡½æ•°å’Œ<code>@Published</code>å±æ€§è¿›è¡Œäº¤äº’ <a class="header-anchor" href="#é€šè¿‡å‡½æ•°å’Œ-publishedå±æ€§è¿›è¡Œäº¤äº’" aria-label="Permalink to &quot;é€šè¿‡å‡½æ•°å’Œ\`@Published\`å±æ€§è¿›è¡Œäº¤äº’&quot;">â€‹</a></h1><p>åœ¨ SwiftUI ä¸­ï¼Œ<code>ViewModel</code> é€šè¿‡å‡½æ•°å’Œ <code>@Published</code> å±æ€§ä¸ <code>View</code> è¿›è¡Œäº¤äº’ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸æ£’çš„æ–¹å¼æ¥ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ï¼ğŸ‰ è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹ã€‚</p><h2 id="published-å±æ€§-çŠ¶æ€çš„å¹¿æ’­å‘˜" tabindex="-1"><code>@Published</code> å±æ€§ï¼šçŠ¶æ€çš„å¹¿æ’­å‘˜ <a class="header-anchor" href="#published-å±æ€§-çŠ¶æ€çš„å¹¿æ’­å‘˜" aria-label="Permalink to &quot;\`@Published\` å±æ€§ï¼šçŠ¶æ€çš„å¹¿æ’­å‘˜&quot;">â€‹</a></h2><p><code>@Published</code> æ˜¯ä¸€ä¸ªå±æ€§åŒ…è£…å™¨ï¼Œå®ƒæ¥è‡ª Combine æ¡†æ¶ã€‚å½“ä½ ä½¿ç”¨ <code>@Published</code> æ ‡è®° <code>ViewModel</code> ä¸­çš„å±æ€§æ—¶ï¼Œæ¯å½“è¯¥å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ç›‘å¬è€…ã€‚è¿™å°±åƒä¸€ä¸ªå¹¿æ’­å‘˜ï¼Œå‘Šè¯‰å¤§å®¶ï¼šâ€œå˜¿ï¼Œæˆ‘æ›´æ–°äº†ï¼â€ ğŸ“¢</p><p>ä¾‹å¦‚ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> counter: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>counter</code> æ˜¯ä¸€ä¸ª <code>@Published</code> å±æ€§ã€‚ä»»ä½•è§‚å¯Ÿ <code>MyViewModel</code> çš„ <code>View</code> éƒ½ä¼šåœ¨ <code>counter</code> æ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–°ã€‚</p><h2 id="å‡½æ•°-è¡Œä¸ºçš„è§¦å‘å™¨" tabindex="-1">å‡½æ•°ï¼šè¡Œä¸ºçš„è§¦å‘å™¨ <a class="header-anchor" href="#å‡½æ•°-è¡Œä¸ºçš„è§¦å‘å™¨" aria-label="Permalink to &quot;å‡½æ•°ï¼šè¡Œä¸ºçš„è§¦å‘å™¨&quot;">â€‹</a></h2><p>å‡½æ•°æ˜¯ <code>ViewModel</code> ä¸­å®šä¹‰è¡Œä¸ºçš„ä¸»è¦æ–¹å¼ã€‚<code>View</code> å¯ä»¥è°ƒç”¨ <code>ViewModel</code> ä¸­çš„å‡½æ•°æ¥è§¦å‘çŠ¶æ€çš„æ”¹å˜ã€‚è¿™ä½¿å¾— <code>View</code> å¯ä»¥ä¸“æ³¨äºå±•ç¤ºæ•°æ®ï¼Œè€Œå°†ä¸šåŠ¡é€»è¾‘å§”æ‰˜ç»™ <code>ViewModel</code>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> counter: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> incrementCounter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>incrementCounter()</code> å‡½æ•°ä¼šå¢åŠ  <code>counter</code> çš„å€¼ã€‚<code>View</code> å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥å¢åŠ è®¡æ•°å™¨ã€‚</p><h2 id="åœ¨-view-ä¸­ä½¿ç”¨å‡½æ•°å’Œ-published" tabindex="-1">åœ¨ View ä¸­ä½¿ç”¨å‡½æ•°å’Œ <code>@Published</code> <a class="header-anchor" href="#åœ¨-view-ä¸­ä½¿ç”¨å‡½æ•°å’Œ-published" aria-label="Permalink to &quot;åœ¨ View ä¸­ä½¿ç”¨å‡½æ•°å’Œ \`@Published\`&quot;">â€‹</a></h2><p>åœ¨ <code>View</code> ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>@ObservedObject</code> æˆ– <code>@StateObject</code> æ¥è§‚å¯Ÿ <code>ViewModel</code>ã€‚ç„¶åï¼Œä½ å¯ä»¥é€šè¿‡ç»‘å®šåˆ° <code>@Published</code> å±æ€§æ¥æ˜¾ç¤ºæ•°æ®ï¼Œå¹¶é€šè¿‡è°ƒç”¨å‡½æ•°æ¥è§¦å‘è¡Œä¸ºã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @ObservedObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MyViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Counter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(viewModel.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">counter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Increment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                viewModel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">incrementCounter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Text</code> è§†å›¾ç»‘å®šåˆ° <code>viewModel.counter</code>ï¼Œæ‰€ä»¥æ¯å½“ <code>counter</code> çš„å€¼æ”¹å˜ï¼Œ<code>Text</code> è§†å›¾éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚<code>Button</code> è°ƒç”¨ <code>viewModel.incrementCounter()</code> å‡½æ•°ï¼Œä»è€Œæ”¹å˜ <code>counter</code> çš„å€¼ã€‚</p><h2 id="ä¼˜åŠ¿" tabindex="-1">ä¼˜åŠ¿ <a class="header-anchor" href="#ä¼˜åŠ¿" aria-label="Permalink to &quot;ä¼˜åŠ¿&quot;">â€‹</a></h2><ul><li><strong>æ¸…æ™°çš„åˆ†ç¦»:</strong> çŠ¶æ€å’Œè¡Œä¸ºè¢«å°è£…åœ¨ <code>ViewModel</code> ä¸­ï¼Œ<code>View</code> åªè´Ÿè´£å±•ç¤ºã€‚</li><li><strong>å¯æµ‹è¯•æ€§:</strong> <code>ViewModel</code> å¯ä»¥ç‹¬ç«‹äº <code>View</code> è¿›è¡Œæµ‹è¯•ã€‚</li><li><strong>å¯ç»´æŠ¤æ€§:</strong> ä»£ç æ›´æ˜“äºç†è§£å’Œä¿®æ”¹ã€‚</li></ul><p>é€šè¿‡å‡½æ•°å’Œ <code>@Published</code> å±æ€§è¿›è¡Œäº¤äº’ï¼Œä½ å¯ä»¥æ„å»ºå‡ºæ›´åŠ å¥å£®å’Œå¯ç»´æŠ¤çš„ SwiftUI åº”ç”¨ï¼ğŸ’ª è®°ä½ï¼Œè‰¯å¥½çš„æ¶æ„æ˜¯æˆåŠŸçš„å…³é”®ï¼</p>`,19)]))}const E=i(l,[["render",p]]);export{o as __pageData,E as default};
