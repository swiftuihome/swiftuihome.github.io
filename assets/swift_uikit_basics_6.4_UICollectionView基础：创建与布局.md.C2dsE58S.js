import{_ as s,c as a,o as e,ag as n}from"./chunks/framework.ymCRTBvy.js";const c=JSON.parse('{"title":"6.4_UICollectionView基础：创建与布局","description":"","frontmatter":{},"headers":[],"relativePath":"swift/uikit/basics/6.4_UICollectionView基础：创建与布局.md","filePath":"swift/uikit/basics/6.4_UICollectionView基础：创建与布局.md"}'),l={name:"swift/uikit/basics/6.4_UICollectionView基础：创建与布局.md"};function t(p,i,h,k,o,r){return e(),a("div",null,i[0]||(i[0]=[n(`<h1 id="_6-4-uicollectionview基础-创建与布局" tabindex="-1">6.4_UICollectionView基础：创建与布局 <a class="header-anchor" href="#_6-4-uicollectionview基础-创建与布局" aria-label="Permalink to &quot;6.4_UICollectionView基础：创建与布局&quot;">​</a></h1><h2 id="uicollectionview-简介与核心优势" tabindex="-1">UICollectionView 简介与核心优势 <a class="header-anchor" href="#uicollectionview-简介与核心优势" aria-label="Permalink to &quot;UICollectionView 简介与核心优势&quot;">​</a></h2><p><code>UICollectionView</code> 是 iOS 开发中一个极其强大的工具，用于展示可定制的、灵活的数据集合。 🤩 它不仅仅是 <code>UITableView</code> 的升级版，更是一个全新的布局范式，让你能够轻松实现网格、瀑布流等复杂布局。 想象一下，你的应用可以拥有令人惊叹的视觉效果！</p><p>它在 iOS 6 中首次亮相，迅速成为展示图片画廊、商品列表等场景的首选。 事实上，超过 70% 的电商应用都依赖 <code>UICollectionView</code> 来呈现其产品目录，因为它提供了无与伦比的灵活性。</p><h2 id="创建-uicollectionview-实例" tabindex="-1">创建 UICollectionView 实例 <a class="header-anchor" href="#创建-uicollectionview-实例" aria-label="Permalink to &quot;创建 UICollectionView 实例&quot;">​</a></h2><p>要开始使用 <code>UICollectionView</code>，你首先需要创建一个实例。 这通常涉及两个关键组件：<code>UICollectionViewLayout</code> 和 <code>UICollectionView</code> 本身。 <code>UICollectionViewLayout</code> 定义了集合视图中项目的排列方式。</p><p>你可以使用 <code>UICollectionViewFlowLayout</code>，这是最常用的布局类，它能轻松实现网格布局。</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UICollectionViewFlowLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.scrollDirection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .vertical </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置滚动方向为垂直</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.itemSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CGSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置每个项目的大小</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> collectionView </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UICollectionView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .zero, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">collectionViewLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: layout)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">collectionView.backgroundColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .white</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这段代码展示了如何初始化一个流式布局，并将其应用于你的集合视图。 你会发现，设置 <code>itemSize</code> 和 <code>scrollDirection</code> 是多么直观！</p><h2 id="配置-uicollectionviewflowlayout" tabindex="-1">配置 UICollectionViewFlowLayout <a class="header-anchor" href="#配置-uicollectionviewflowlayout" aria-label="Permalink to &quot;配置 UICollectionViewFlowLayout&quot;">​</a></h2><p><code>UICollectionViewFlowLayout</code> 提供了丰富的属性来定制你的布局。 你可以调整项目间距、行间距以及节的内边距。</p><ul><li><code>minimumLineSpacing</code>: 定义了同一滚动方向上相邻行或列之间的最小间距。</li><li><code>minimumInteritemSpacing</code>: 定义了垂直于滚动方向上相邻项目之间的最小间距。</li><li><code>sectionInset</code>: 设置每个节的内边距，让你能更好地控制内容与边缘的距离。</li></ul><p>例如，你可以这样设置：</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.minimumLineSpacing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 行间距</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.minimumInteritemSpacing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 项目间距</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.sectionInset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UIEdgeInsets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">right</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 节内边距</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这些属性让你能够精确控制集合视图的视觉呈现，实现你想要的任何布局效果。 🎨</p><h2 id="将-uicollectionview-添加到视图层级" tabindex="-1">将 UICollectionView 添加到视图层级 <a class="header-anchor" href="#将-uicollectionview-添加到视图层级" aria-label="Permalink to &quot;将 UICollectionView 添加到视图层级&quot;">​</a></h2><p>创建并配置好 <code>UICollectionView</code> 后，你需要将其添加到你的视图控制器中。 就像其他任何 <code>UIView</code> 一样，你需要将其添加到父视图，并设置好约束。</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">view.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addSubview</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(collectionView)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">collectionView.translatesAutoresizingMaskIntoConstraints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NSLayoutConstraint.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">activate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    collectionView.topAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.safeAreaLayoutGuide.topAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    collectionView.leadingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.leadingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    collectionView.trailingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.trailingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    collectionView.bottomAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: view.safeAreaLayoutGuide.bottomAnchor)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>通过这些约束，你的 <code>UICollectionView</code> 将会完美地填充整个安全区域，确保在不同设备上都能有良好的显示效果。 🚀</p><h2 id="注册-cell-和-supplementary-view" tabindex="-1">注册 Cell 和 Supplementary View <a class="header-anchor" href="#注册-cell-和-supplementary-view" aria-label="Permalink to &quot;注册 Cell 和 Supplementary View&quot;">​</a></h2><p>在使用 <code>UICollectionView</code> 显示数据之前，你必须注册你将要使用的 <code>UICollectionViewCell</code> 类。 如果你需要头部或尾部视图，也需要注册它们。</p><ol><li><p><strong>注册 Cell</strong>:</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">collectionView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyCustomCell.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">forCellWithReuseIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyCellIdentifier&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这告诉 <code>UICollectionView</code> 当需要一个带有 &quot;MyCellIdentifier&quot; 标识符的 Cell 时，它应该实例化 <code>MyCustomCell</code>。</p></li><li><p><strong>注册 Supplementary View (可选)</strong>:</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">collectionView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyHeaderView.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                        forSupplementaryViewOfKind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: UICollectionView.elementKindSectionHeader,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                        withReuseIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyHeaderIdentifier&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这对于创建节的头部或尾部非常有用，例如在相册应用中显示日期。 🌟</p></li></ol><p>通过这些步骤，你已经成功地创建并配置了一个 <code>UICollectionView</code>，为展示你的精彩数据做好了准备！</p>`,23)]))}const E=s(l,[["render",t]]);export{c as __pageData,E as default};
