import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.Bw-5EFTY.js";const d=JSON.parse('{"title":"åœ¨ UITableViewCell ä¸­åµŒå…¥ SwiftUI è§†å›¾","description":"","frontmatter":{},"headers":[],"relativePath":"advanced/13.2_åœ¨ UITableViewCell ä¸­ä½¿ç”¨ SwiftUI.md","filePath":"advanced/13.2_åœ¨ UITableViewCell ä¸­ä½¿ç”¨ SwiftUI.md"}'),e={name:"advanced/13.2_åœ¨ UITableViewCell ä¸­ä½¿ç”¨ SwiftUI.md"};function t(p,s,h,k,r,o){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="åœ¨-uitableviewcell-ä¸­åµŒå…¥-swiftui-è§†å›¾" tabindex="-1">åœ¨ <code>UITableViewCell</code> ä¸­åµŒå…¥ SwiftUI è§†å›¾ <a class="header-anchor" href="#åœ¨-uitableviewcell-ä¸­åµŒå…¥-swiftui-è§†å›¾" aria-label="Permalink to &quot;åœ¨ \`UITableViewCell\` ä¸­åµŒå…¥ SwiftUI è§†å›¾&quot;">â€‹</a></h1><blockquote><p>åœ¨ <code>UITableViewCell</code> ä¸­é›†æˆ SwiftUI è§†å›¾æ˜¯æå‡ç”¨æˆ·ç•Œé¢ä½“éªŒçš„ç»ä½³æ–¹å¼ã€‚ ğŸš€ è¿™ç§æ–¹æ³•å…è®¸æ‚¨åˆ©ç”¨ SwiftUI å¼ºå¤§çš„å£°æ˜å¼è¯­æ³•ï¼ŒåŒæ—¶ä¿ç•™ UIKit ç°æœ‰æ¶æ„çš„ä¼˜åŠ¿ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨çš„è¡¨æ ¼è§†å›¾å•å…ƒæ ¼æ‹¥æœ‰æ›´ä¸°å¯Œçš„äº¤äº’æ€§å’Œæ›´ç®€æ´çš„ä»£ç ï¼</p></blockquote><h2 id="å®ç°-uihostingcontroller" tabindex="-1">å®ç° <code>UIHostingController</code> <a class="header-anchor" href="#å®ç°-uihostingcontroller" aria-label="Permalink to &quot;å®ç° \`UIHostingController\`&quot;">â€‹</a></h2><p>è¦åœ¨ <code>UITableViewCell</code> ä¸­ä½¿ç”¨ SwiftUI è§†å›¾ï¼Œæ ¸å¿ƒåœ¨äº <code>UIHostingController</code>ã€‚ æ‚¨éœ€è¦ä¸ºæ¯ä¸ª SwiftUI è§†å›¾åˆ›å»ºä¸€ä¸ª <code>UIHostingController</code> å®ä¾‹ã€‚ è¿™ä¸ªæ§åˆ¶å™¨å……å½“ UIKit å’Œ SwiftUI ä¹‹é—´çš„æ¡¥æ¢ï¼Œè®© SwiftUI è§†å›¾èƒ½å¤Ÿè¢« UIKit è§†å›¾å±‚çº§æ‰€ç®¡ç†ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³é”®æ­¥éª¤ï¼š</p><ul><li><strong>åˆ›å»ºè‡ªå®šä¹‰ <code>UITableViewCell</code> å­ç±»</strong>ï¼šè¿™æ˜¯æ‚¨å°†åµŒå…¥ SwiftUI è§†å›¾çš„åœ°æ–¹ã€‚</li><li><strong>åœ¨å•å…ƒæ ¼ä¸­æ·»åŠ ä¸€ä¸ªå®¹å™¨è§†å›¾</strong>ï¼šè¿™ä¸ª <code>UIView</code> å°†ä½œä¸º <code>UIHostingController</code> è§†å›¾çš„çˆ¶è§†å›¾ã€‚</li><li><strong>å®ä¾‹åŒ– <code>UIHostingController</code></strong>ï¼šåœ¨å•å…ƒæ ¼çš„ <code>init</code> æ–¹æ³•æˆ– <code>prepareForReuse</code> æ–¹æ³•ä¸­åˆ›å»ºå®ƒã€‚</li></ul><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomCell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UITableViewCell </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hostingController: UIHostingController&lt;SomeSwiftUIView&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> swiftUIView: SomeSwiftUIView) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hostingController </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UIHostingController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rootView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: swiftUIView)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            guard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hostedView </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hostingController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostedView.translatesAutoresizingMaskIntoConstraints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            contentView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addSubview</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hostedView)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            NSLayoutConstraint.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">activate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                hostedView.leadingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: contentView.leadingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                hostedView.trailingAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: contentView.trailingAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                hostedView.topAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: contentView.topAnchor),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                hostedView.bottomAnchor.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constraint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equalTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: contentView.bottomAnchor)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hostingController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.rootView </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> swiftUIView</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        hostingController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setNeedsLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        hostingController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">layoutIfNeeded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prepareForReuse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepareForReuse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¯ä»¥åœ¨è¿™é‡Œé‡ç½®æˆ–æ›´æ–° SwiftUI è§†å›¾çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="ç®¡ç†è§†å›¾ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®æµ" tabindex="-1">ç®¡ç†è§†å›¾ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®æµ <a class="header-anchor" href="#ç®¡ç†è§†å›¾ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®æµ" aria-label="Permalink to &quot;ç®¡ç†è§†å›¾ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®æµ&quot;">â€‹</a></h2><p>æ­£ç¡®ç®¡ç† <code>UIHostingController</code> çš„ç”Ÿå‘½å‘¨æœŸè‡³å…³é‡è¦ã€‚ å½“å•å…ƒæ ¼è¢«é‡ç”¨æ—¶ï¼Œæ‚¨éœ€è¦ç¡®ä¿ SwiftUI è§†å›¾å¾—åˆ°æ›´æ–°è€Œä¸æ˜¯é‡æ–°åˆ›å»ºã€‚ ğŸ”„ å¦åˆ™ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°æ€§èƒ½é—®é¢˜æˆ–è§†å›¾çŠ¶æ€ä¸ä¸€è‡´ã€‚</p><ul><li><strong>æ•°æ®ä¼ é€’</strong>ï¼šé€šè¿‡ <code>UIHostingController</code> çš„ <code>rootView</code> å±æ€§æ›´æ–° SwiftUI è§†å›¾çš„æ•°æ®ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…åœ¨ <code>tableView(_:cellForRowAt:)</code> ä¸­é¢‘ç¹åˆ›å»ºæ–°çš„ <code>UIHostingController</code> å®ä¾‹ã€‚ å°½å¯èƒ½é‡ç”¨å®ƒä»¬ã€‚</li><li><strong>å¸ƒå±€æ›´æ–°</strong>ï¼šç¡®ä¿ SwiftUI è§†å›¾çš„å¸ƒå±€åœ¨å•å…ƒæ ¼å°ºå¯¸å˜åŒ–æ—¶èƒ½å¤Ÿæ­£ç¡®æ›´æ–°ã€‚</li></ul><p>æ ¹æ®ä¸€é¡¹è°ƒæŸ¥ï¼Œè¶…è¿‡ 70% çš„ iOS å¼€å‘è€…è®¤ä¸ºåœ¨ UIKit ä¸­åµŒå…¥ SwiftUI è§†å›¾æ˜¾è‘—æé«˜äº†å¼€å‘æ•ˆç‡ã€‚ ğŸ“ˆ</p><h2 id="ä¼˜åŒ–æ€§èƒ½å’Œå¸ƒå±€" tabindex="-1">ä¼˜åŒ–æ€§èƒ½å’Œå¸ƒå±€ <a class="header-anchor" href="#ä¼˜åŒ–æ€§èƒ½å’Œå¸ƒå±€" aria-label="Permalink to &quot;ä¼˜åŒ–æ€§èƒ½å’Œå¸ƒå±€&quot;">â€‹</a></h2><p>ä¸ºäº†ç¡®ä¿æµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚ ç‰¹åˆ«æ˜¯åœ¨æ»šåŠ¨è¡¨æ ¼è§†å›¾æ—¶ï¼Œæ‚¨ä¼šå¸Œæœ›å•å…ƒæ ¼çš„æ¸²æŸ“å°½å¯èƒ½é«˜æ•ˆã€‚</p><p>æ‚¨å¯ä»¥é‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼š</p><ol><li><strong>é¿å…ä¸å¿…è¦çš„è§†å›¾æ›´æ–°</strong>ï¼šä»…åœ¨æ•°æ®çœŸæ­£æ”¹å˜æ—¶æ‰æ›´æ–° SwiftUI è§†å›¾ã€‚</li><li><strong>ä½¿ç”¨ <code>fixedSize()</code> æˆ– <code>frame()</code></strong>ï¼šåœ¨ SwiftUI è§†å›¾ä¸­æ˜ç¡®æŒ‡å®šå°ºå¯¸ï¼Œä»¥å¸®åŠ© UIKit æ›´å¥½åœ°è®¡ç®—å•å…ƒæ ¼é«˜åº¦ã€‚</li><li><strong>åˆ©ç”¨ <code>UITableView.automaticDimension</code></strong>ï¼šè®©è¡¨æ ¼è§†å›¾è‡ªåŠ¨è®¡ç®—å•å…ƒæ ¼é«˜åº¦ï¼Œè¿™é€šå¸¸ä¸ SwiftUI è§†å›¾çš„å›ºæœ‰å†…å®¹å¤§å°é…åˆå¾—å¾ˆå¥½ã€‚</li></ol><p>é€šè¿‡è¿™äº›æŠ€å·§ï¼Œæ‚¨å°†èƒ½å¤Ÿæ„å»ºå‡ºæ—¢ç¾è§‚åˆé«˜æ€§èƒ½çš„æ··åˆåº”ç”¨ã€‚ ğŸš€ è¿™ç§é›†æˆæ–¹å¼ä¸ºæ‚¨çš„é¡¹ç›®å¸¦æ¥äº†å·¨å¤§çš„çµæ´»æ€§å’Œæœªæ¥çš„å¯æ‰©å±•æ€§ã€‚</p>`,16)]))}const c=i(e,[["render",t]]);export{d as __pageData,c as default};
