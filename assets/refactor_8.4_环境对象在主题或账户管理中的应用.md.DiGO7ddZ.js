import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨","description":"","frontmatter":{},"headers":[],"relativePath":"refactor/8.4_ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨.md","filePath":"refactor/8.4_ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨.md"}'),l={name:"refactor/8.4_ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨.md"};function t(p,s,h,k,r,d){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨" tabindex="-1">ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨ <a class="header-anchor" href="#ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨" aria-label="Permalink to &quot;ç¯å¢ƒå¯¹è±¡åœ¨ä¸»é¢˜æˆ–è´¦æˆ·ç®¡ç†ä¸­çš„åº”ç”¨&quot;">â€‹</a></h1><p>ç¯å¢ƒå¯¹è±¡åœ¨ SwiftUI ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œå°¤å…¶æ˜¯åœ¨ä¸»é¢˜å’Œè´¦æˆ·ç®¡ç†ç­‰å…¨å±€çŠ¶æ€å…±äº«çš„åœºæ™¯ä¸­ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªä¸­å¤®æ¢çº½ï¼Œè®©ä½ çš„åº”ç”¨çš„ä¸åŒéƒ¨åˆ†èƒ½å¤Ÿè½»æ¾è®¿é—®å’Œä¿®æ”¹å…±äº«æ•°æ®ï¼Œè€Œæ— éœ€ç¹ççš„å±‚å±‚ä¼ é€’ã€‚è¿™ä¸ä»…ç®€åŒ–äº†ä»£ç ï¼Œè¿˜æé«˜äº†åº”ç”¨çš„å¯ç»´æŠ¤æ€§ã€‚ğŸ‰</p><h2 id="ä¸»é¢˜ç®¡ç†" tabindex="-1">ä¸»é¢˜ç®¡ç† <a class="header-anchor" href="#ä¸»é¢˜ç®¡ç†" aria-label="Permalink to &quot;ä¸»é¢˜ç®¡ç†&quot;">â€‹</a></h2><p>ä½¿ç”¨ç¯å¢ƒå¯¹è±¡è¿›è¡Œä¸»é¢˜ç®¡ç†ï¼Œä½ å¯ä»¥è½»æ¾åˆ‡æ¢åº”ç”¨çš„ä¸»é¢˜é¢œè‰²ã€å­—ä½“ç­‰ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª <code>ObservableObject</code> æ¥å­˜å‚¨ä¸»é¢˜ä¿¡æ¯ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThemeSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accentColor: Color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .blue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶åï¼Œåœ¨åº”ç”¨çš„é¡¶å±‚æ³¨å…¥è¿™ä¸ªç¯å¢ƒå¯¹è±¡ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">environmentObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ThemeSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æœ€åï¼Œåœ¨ä»»ä½•å­è§†å›¾ä¸­ï¼Œä½ éƒ½å¯ä»¥é€šè¿‡ <code>@EnvironmentObject</code> æ¥è®¿é—®å’Œä¿®æ”¹ä¸»é¢˜ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@EnvironmentObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> themeSettings: ThemeSettings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">foregroundColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(themeSettings.accentColor)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·ï¼Œå½“ä½ ä¿®æ”¹ <code>themeSettings.accentColor</code> æ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥å±æ€§çš„è§†å›¾éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ï¼æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼ŸğŸ˜</p><h2 id="è´¦æˆ·ç®¡ç†" tabindex="-1">è´¦æˆ·ç®¡ç† <a class="header-anchor" href="#è´¦æˆ·ç®¡ç†" aria-label="Permalink to &quot;è´¦æˆ·ç®¡ç†&quot;">â€‹</a></h2><p>è´¦æˆ·ç®¡ç†æ˜¯å¦ä¸€ä¸ªç¯å¢ƒå¯¹è±¡å¤§æ˜¾èº«æ‰‹çš„åœ°æ–¹ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>ObservableObject</code> æ¥å­˜å‚¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccountManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isLoggedIn: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åŒæ ·ï¼Œåœ¨åº”ç”¨çš„é¡¶å±‚æ³¨å…¥ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">environmentObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AccountManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åœ¨éœ€è¦è®¿é—®ç”¨æˆ·ä¿¡æ¯çš„è§†å›¾ä¸­ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@EnvironmentObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountManager: AccountManager</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountManager.isLoggedIn {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¬¢è¿ï¼Œ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(accountManager.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">username</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·ç™»å½•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨æ•´ä¸ªåº”ç”¨ä¸­ç®¡ç†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å’Œä¿¡æ¯ã€‚è€Œä¸”ï¼Œå½“ç”¨æˆ·ç™»å½•æˆ–æ³¨é”€æ—¶ï¼Œæ‰€æœ‰ç›¸å…³çš„è§†å›¾éƒ½ä¼šç«‹å³æ›´æ–°ã€‚ğŸš€</p><h2 id="å®é™…æ¡ˆä¾‹åˆ†æ" tabindex="-1">å®é™…æ¡ˆä¾‹åˆ†æ <a class="header-anchor" href="#å®é™…æ¡ˆä¾‹åˆ†æ" aria-label="Permalink to &quot;å®é™…æ¡ˆä¾‹åˆ†æ&quot;">â€‹</a></h2><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç¤¾äº¤åº”ç”¨ï¼Œéœ€è¦ç®¡ç†ç”¨æˆ·çš„ä¸»é¢˜åå¥½å’Œè´¦æˆ·ä¿¡æ¯ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>SettingsManager</code>ï¼ŒåŒæ—¶åŒ…å«ä¸»é¢˜è®¾ç½®å’Œè´¦æˆ·ä¿¡æ¯ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SettingsManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> themeSettings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ThemeSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountManager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AccountManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç„¶åï¼Œåœ¨ <code>App</code> ä¸­æ³¨å…¥ <code>SettingsManager</code>ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">environmentObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SettingsManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ä»»ä½•è§†å›¾ä¸­åŒæ—¶è®¿é—®ä¸»é¢˜å’Œè´¦æˆ·ä¿¡æ¯ï¼Œå®ç°æ›´å¤æ‚çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·çš„ç™»å½•çŠ¶æ€è‡ªåŠ¨åˆ‡æ¢ä¸»é¢˜ã€‚ğŸŒŸ</p><p>æ€»è€Œè¨€ä¹‹ï¼Œç¯å¢ƒå¯¹è±¡æ˜¯ SwiftUI ä¸­ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç†å…¨å±€çŠ¶æ€ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚å¸Œæœ›ä½ èƒ½çµæ´»è¿ç”¨å®ƒï¼Œæ„å»ºå‡ºæ›´å‡ºè‰²çš„åº”ç”¨ï¼ğŸ‘</p>`,25)]))}const g=i(l,[["render",t]]);export{E as __pageData,g as default};
