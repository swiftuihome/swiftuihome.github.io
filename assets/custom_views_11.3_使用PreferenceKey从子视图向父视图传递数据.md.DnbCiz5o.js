import{_ as i,c as e,o as a,ag as n}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®","description":"","frontmatter":{},"headers":[],"relativePath":"custom_views/11.3_ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®.md","filePath":"custom_views/11.3_ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®.md"}'),l={name:"custom_views/11.3_ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®.md"};function p(r,s,h,t,k,d){return a(),e("div",null,s[0]||(s[0]=[n(`<h1 id="ä½¿ç”¨preferencekeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®" tabindex="-1">ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ® <a class="header-anchor" href="#ä½¿ç”¨preferencekeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®" aria-label="Permalink to &quot;ä½¿ç”¨PreferenceKeyä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®&quot;">â€‹</a></h1><p>ä½¿ç”¨ <strong>PreferenceKey</strong> ä»å­è§†å›¾å‘çˆ¶è§†å›¾ä¼ é€’æ•°æ®ï¼Œè¿™æ˜¯ä¸€ç§å¼ºå¤§çš„ SwiftUI æŠ€æœ¯ï¼Œå…è®¸ä½ æ„å»ºæ›´çµæ´»å’Œå¯é‡ç”¨çš„ç»„ä»¶ã€‚ğŸš€ è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢å¦‚ä½•ä½¿ç”¨å®ƒï¼</p><h2 id="preferencekey-ç®€ä»‹" tabindex="-1">PreferenceKey ç®€ä»‹ <a class="header-anchor" href="#preferencekey-ç®€ä»‹" aria-label="Permalink to &quot;PreferenceKey ç®€ä»‹&quot;">â€‹</a></h2><p>PreferenceKey å…è®¸å­è§†å›¾å‘å…¶çˆ¶è§†å›¾ä¼ é€’ä¿¡æ¯ï¼Œè€Œæ— éœ€ç›´æ¥çš„ç»‘å®šæˆ–å›è°ƒã€‚è¿™å¯¹äºåœ¨å¤æ‚çš„è§†å›¾å±‚æ¬¡ç»“æ„ä¸­åè°ƒå¸ƒå±€æˆ–çŠ¶æ€éå¸¸æœ‰ç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå•å‘çš„ä¿¡æ¯é€šé“ï¼Œå­è§†å›¾â€œå‘å¸ƒâ€ä¸€ä¸ªå€¼ï¼Œçˆ¶è§†å›¾â€œè®¢é˜…â€å¹¶æ¥æ”¶è¿™ä¸ªå€¼ã€‚</p><ul><li><strong>å•å‘æ•°æ®æµ:</strong> æ•°æ®ä»å­è§†å›¾æµå‘çˆ¶è§†å›¾ã€‚</li><li><strong>è§£è€¦:</strong> å­è§†å›¾ä¸éœ€è¦çŸ¥é“å“ªä¸ªçˆ¶è§†å›¾æ­£åœ¨ç›‘å¬ã€‚</li><li><strong>çµæ´»æ€§:</strong> å…è®¸çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾çš„ä¿¡æ¯è¿›è¡Œè°ƒæ•´ã€‚</li></ul><h2 id="å®šä¹‰-preferencekey" tabindex="-1">å®šä¹‰ PreferenceKey <a class="header-anchor" href="#å®šä¹‰-preferencekey" aria-label="Permalink to &quot;å®šä¹‰ PreferenceKey&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªç¬¦åˆ <code>PreferenceKey</code> åè®®çš„ç»“æ„ä½“ã€‚è¿™ä¸ªç»“æ„ä½“éœ€è¦ä¸€ä¸ª <code>defaultValue</code> å’Œä¸€ä¸ª <code>reduce</code> å‡½æ•°ã€‚<code>defaultValue</code> æ˜¯ä¸€ä¸ªåˆå§‹å€¼ï¼Œè€Œ <code>reduce</code> å‡½æ•°åˆ™å®šä¹‰äº†å¦‚ä½•åˆå¹¶æ¥è‡ªå¤šä¸ªå­è§†å›¾çš„å€¼ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPreferenceKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PreferenceKey </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultValue: CGFloat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">inout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CGFloat, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CGFloat) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nextValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>MyPreferenceKey</code> çš„ PreferenceKeyï¼Œå®ƒä¼ é€’ä¸€ä¸ª <code>CGFloat</code> å€¼ã€‚<code>reduce</code> å‡½æ•°ç®€å•åœ°å°† <code>value</code> è®¾ç½®ä¸º <code>nextValue()</code>ï¼Œè¿™æ„å‘³ç€å¦‚æœæœ‰å¤šä¸ªå­è§†å›¾è®¾ç½®äº†è¿™ä¸ª PreferenceKeyï¼Œçˆ¶è§†å›¾å°†æ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­è§†å›¾çš„å€¼ã€‚</p><h2 id="ä½¿ç”¨-preferencekey" tabindex="-1">ä½¿ç”¨ PreferenceKey <a class="header-anchor" href="#ä½¿ç”¨-preferencekey" aria-label="Permalink to &quot;ä½¿ç”¨ PreferenceKey&quot;">â€‹</a></h2><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨å­è§†å›¾ä¸­ä½¿ç”¨ <code>preference(key:value:)</code> ä¿®é¥°ç¬¦æ¥è®¾ç½® PreferenceKey çš„å€¼ï¼Œå¹¶åœ¨çˆ¶è§†å›¾ä¸­ä½¿ç”¨ <code>onPreferenceChange(_:perform:)</code> ä¿®é¥°ç¬¦æ¥æ¥æ”¶è¿™ä¸ªå€¼ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ChildView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Color.blue)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">preference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: MyPreferenceKey.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½® PreferenceKey çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> preferenceValue: CGFloat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        VStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            ChildView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Preference Value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(preferenceValue)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onPreferenceChange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyPreferenceKey.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.preferenceValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¥æ”¶ PreferenceKey çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>ChildView</code> è®¾ç½®äº† <code>MyPreferenceKey</code> çš„å€¼ä¸º 100ã€‚<code>ParentView</code> ä½¿ç”¨ <code>onPreferenceChange</code> ä¿®é¥°ç¬¦æ¥ç›‘å¬ <code>MyPreferenceKey</code> çš„å˜åŒ–ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„å€¼å­˜å‚¨åœ¨ <code>preferenceValue</code> çŠ¶æ€å˜é‡ä¸­ã€‚æœ€ç»ˆï¼Œ<code>ParentView</code> ä¼šæ˜¾ç¤º &quot;Preference Value: 100&quot;ã€‚ğŸ‰</p><h2 id="å®é™…åº”ç”¨åœºæ™¯" tabindex="-1">å®é™…åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;å®é™…åº”ç”¨åœºæ™¯&quot;">â€‹</a></h2><p>PreferenceKey åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼š</p><ol><li><strong>è·å–å­è§†å›¾çš„é«˜åº¦:</strong> ä½ å¯ä»¥ä½¿ç”¨ PreferenceKey æ¥è·å–å­è§†å›¾çš„é«˜åº¦ï¼Œå¹¶æ ¹æ®è¿™ä¸ªé«˜åº¦è°ƒæ•´çˆ¶è§†å›¾çš„å¸ƒå±€ã€‚</li><li><strong>åŒæ­¥æ»šåŠ¨è§†å›¾:</strong> ä½ å¯ä»¥ä½¿ç”¨ PreferenceKey æ¥åŒæ­¥å¤šä¸ªæ»šåŠ¨è§†å›¾çš„æ»šåŠ¨ä½ç½®ã€‚</li><li><strong>è‡ªå®šä¹‰å¸ƒå±€:</strong> ä½ å¯ä»¥ä½¿ç”¨ PreferenceKey æ¥åˆ›å»ºè‡ªå®šä¹‰çš„å¸ƒå±€å®¹å™¨ï¼Œæ ¹æ®å­è§†å›¾çš„éœ€æ±‚è¿›è¡Œå¸ƒå±€ã€‚</li></ol><p>æ€»è€Œè¨€ä¹‹ï¼ŒPreferenceKey æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ„å»ºæ›´çµæ´»å’Œå¯é‡ç”¨çš„ SwiftUI ç»„ä»¶ã€‚é€šè¿‡ç†è§£å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨ PreferenceKeyï¼Œä½ å¯ä»¥æ›´å¥½åœ°æ§åˆ¶è§†å›¾ä¹‹é—´çš„äº¤äº’ï¼Œå¹¶åˆ›å»ºæ›´å¤æ‚çš„ UI æ•ˆæœã€‚ğŸ‘</p>`,17)]))}const y=i(l,[["render",p]]);export{E as __pageData,y as default};
