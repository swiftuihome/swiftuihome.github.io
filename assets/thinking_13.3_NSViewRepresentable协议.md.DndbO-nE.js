import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const c=JSON.parse('{"title":"NSViewRepresentableåè®®","description":"","frontmatter":{},"headers":[],"relativePath":"thinking/13.3_NSViewRepresentableåè®®.md","filePath":"thinking/13.3_NSViewRepresentableåè®®.md"}'),l={name:"thinking/13.3_NSViewRepresentableåè®®.md"};function p(t,s,h,k,r,E){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="nsviewrepresentableåè®®" tabindex="-1">NSViewRepresentableåè®® <a class="header-anchor" href="#nsviewrepresentableåè®®" aria-label="Permalink to &quot;NSViewRepresentableåè®®&quot;">â€‹</a></h1><blockquote><p>NSViewRepresentableåè®®æ˜¯SwiftUIä¸AppKitä¹‹é—´çš„æ¡¥æ¢ï¼Œå…è®¸ä½ åœ¨SwiftUIä¸­ä½¿ç”¨NSViewï¼ˆmacOSçš„åŸç”Ÿè§†å›¾ï¼‰ã€‚é€šè¿‡å®ç°è¿™ä¸ªåè®®ï¼Œä½ å¯ä»¥å°†ç°æœ‰çš„AppKitè§†å›¾åµŒå…¥åˆ°SwiftUIç•Œé¢ä¸­ï¼Œå……åˆ†åˆ©ç”¨åŸç”Ÿæ§ä»¶çš„åŠŸèƒ½ã€‚</p></blockquote><h2 id="å®ç°nsviewrepresentable" tabindex="-1">å®ç°NSViewRepresentable <a class="header-anchor" href="#å®ç°nsviewrepresentable" aria-label="Permalink to &quot;å®ç°NSViewRepresentable&quot;">â€‹</a></h2><p>è¦å®ç°NSViewRepresentableåè®®ï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå¹¶éµå¾ªè¯¥åè®®ã€‚ä»¥ä¸‹æ˜¯å®ç°çš„åŸºæœ¬æ­¥éª¤ï¼š</p><ol><li><strong>å®šä¹‰ç»“æ„ä½“</strong>ï¼šåˆ›å»ºä¸€ä¸ªéµå¾ªNSViewRepresentableçš„ç»“æ„ä½“ã€‚</li><li><strong>å®ç°åè®®æ–¹æ³•</strong>ï¼š <ul><li><code>makeNSView(context:)</code>ï¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªNSViewå®ä¾‹ã€‚</li><li><code>updateNSView(_:context:)</code>ï¼šæ›´æ–°è§†å›¾çš„çŠ¶æ€ã€‚</li></ul></li></ol><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NSViewRepresentable </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeNSView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NSView {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> view </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NSView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // é…ç½®è§†å›¾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> view</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateNSView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nsView: NSView, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ›´æ–°è§†å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ä½¿ç”¨nsviewrepresentable" tabindex="-1">ä½¿ç”¨NSViewRepresentable <a class="header-anchor" href="#ä½¿ç”¨nsviewrepresentable" aria-label="Permalink to &quot;ä½¿ç”¨NSViewRepresentable&quot;">â€‹</a></h2><p>åœ¨SwiftUIä¸­ä½¿ç”¨NSViewRepresentableéå¸¸ç®€å•ã€‚ä½ åªéœ€åœ¨SwiftUIè§†å›¾ä¸­è°ƒç”¨ä½ çš„è‡ªå®šä¹‰è§†å›¾ç»“æ„ä½“ã€‚ä¾‹å¦‚ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        MyCustomView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ä¸Šä¸‹æ–‡çš„ä½¿ç”¨" tabindex="-1">ä¸Šä¸‹æ–‡çš„ä½¿ç”¨ <a class="header-anchor" href="#ä¸Šä¸‹æ–‡çš„ä½¿ç”¨" aria-label="Permalink to &quot;ä¸Šä¸‹æ–‡çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>åœ¨å®ç°NSViewRepresentableæ—¶ï¼Œ<code>Context</code>å‚æ•°æä¾›äº†é¢å¤–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚åè°ƒå™¨ï¼ˆCoordinatorï¼‰ã€‚åè°ƒå™¨å¯ä»¥ç”¨äºå¤„ç†ç”¨æˆ·äº¤äº’å’Œæ•°æ®ç»‘å®šã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®šä¹‰åè°ƒå™¨ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeCoordinator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Coordinator {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Coordinator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Coordinator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NSObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent: MyCustomView</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent: MyCustomView) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="å¤„ç†æ•°æ®ç»‘å®š" tabindex="-1">å¤„ç†æ•°æ®ç»‘å®š <a class="header-anchor" href="#å¤„ç†æ•°æ®ç»‘å®š" aria-label="Permalink to &quot;å¤„ç†æ•°æ®ç»‘å®š&quot;">â€‹</a></h2><p>å¦‚æœä½ çš„NSViewéœ€è¦ä¸SwiftUIçš„çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨<code>@Binding</code>å±æ€§ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿SwiftUIå’ŒNSViewä¹‹é—´çš„æ•°æ®åŒæ­¥ã€‚ä¾‹å¦‚ï¼š</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NSViewRepresentable </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Binding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeNSView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NSTextField {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> textField </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NSTextField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        textField.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stringValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> textField</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateNSView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nsView: NSTextField, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        nsView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stringValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">â€‹</a></h2><p>NSViewRepresentableåè®®ä¸ºSwiftUIæä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨SwiftUIä¸­æ— ç¼é›†æˆAppKitè§†å›¾ã€‚é€šè¿‡ç®€å•çš„å®ç°æ­¥éª¤ï¼Œä½ å¯ä»¥è½»æ¾åœ°å°†ç°æœ‰çš„macOSæ§ä»¶å¼•å…¥åˆ°ä½ çš„SwiftUIåº”ç”¨ä¸­ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ğŸ‰</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>å……åˆ†åˆ©ç”¨ç°æœ‰çš„AppKitæ§ä»¶ã€‚</li><li>æé«˜å¼€å‘æ•ˆç‡ã€‚</li><li>å…è®¸æ›´å¤æ‚çš„ç”¨æˆ·ç•Œé¢è®¾è®¡ã€‚</li></ul></li></ul><p>é€šè¿‡æŒæ¡NSViewRepresentableåè®®ï¼Œä½ å°†èƒ½å¤Ÿåˆ›å»ºæ›´ä¸°å¯Œçš„macOSåº”ç”¨ï¼Œå……åˆ†å‘æŒ¥SwiftUIçš„ä¼˜åŠ¿ï¼ğŸš€</p>`,19)]))}const g=i(l,[["render",p]]);export{c as __pageData,g as default};
