import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const E=JSON.parse('{"title":"ç¼–ç æ•°æ®åˆ°JSON","description":"","frontmatter":{},"headers":[],"relativePath":"network/3.3_ä½¿ç”¨JSONEncoderç¼–ç æ•°æ®.md","filePath":"network/3.3_ä½¿ç”¨JSONEncoderç¼–ç æ•°æ®.md"}'),l={name:"network/3.3_ä½¿ç”¨JSONEncoderç¼–ç æ•°æ®.md"};function t(p,s,h,k,r,d){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ç¼–ç æ•°æ®åˆ°json" tabindex="-1">ç¼–ç æ•°æ®åˆ°JSON <a class="header-anchor" href="#ç¼–ç æ•°æ®åˆ°json" aria-label="Permalink to &quot;ç¼–ç æ•°æ®åˆ°JSON&quot;">â€‹</a></h1><p>ä½¿ç”¨ <code>JSONEncoder</code> å°† Swift æ•°æ®ç»“æ„è½¬æ¢ä¸º JSON æ ¼å¼æ˜¯ç½‘ç»œè¯·æ±‚ä¸­çš„å…³é”®ä¸€æ­¥ã€‚è¿™å¯¹äºå‘é€ POST è¯·æ±‚ä½“è‡³å…³é‡è¦ã€‚ä½ å°†å‘ç°å®ƒéå¸¸ç›´è§‚ä¸”å¼ºå¤§ã€‚ğŸš€</p><p>è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿ä½ çš„ Swift å¯¹è±¡èƒ½å¤Ÿè¢«æœåŠ¡å™¨æ­£ç¡®è§£æã€‚å¤§çº¦ 85% çš„ç°ä»£ API éƒ½å€¾å‘äºæ¥æ”¶ JSON æ•°æ®ã€‚</p><h2 id="jsonencoder-çš„åŸºæœ¬ç”¨æ³•" tabindex="-1">JSONEncoder çš„åŸºæœ¬ç”¨æ³• <a class="header-anchor" href="#jsonencoder-çš„åŸºæœ¬ç”¨æ³•" aria-label="Permalink to &quot;JSONEncoder çš„åŸºæœ¬ç”¨æ³•&quot;">â€‹</a></h2><p><code>JSONEncoder</code> æ˜¯ Swift <code>Codable</code> åè®®çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå…è®¸ä½ è½»æ¾åœ°å°†ç¬¦åˆ <code>Encodable</code> åè®®çš„ Swift ç±»å‹è½¬æ¢ä¸º <code>Data</code> å¯¹è±¡ã€‚è¿™ä¸ª <code>Data</code> å¯¹è±¡å°±æ˜¯ä½ çš„ JSON è¯·æ±‚ä½“ã€‚</p><p>ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ª <code>JSONEncoder</code> å®ä¾‹ï¼Œç„¶åè°ƒç”¨å…¶ <code>encode</code> æ–¹æ³•ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> encoder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSONEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">encoder.outputFormatting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .prettyPrinted </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯é€‰ï¼šä¸ºäº†å¯è¯»æ€§</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å°†-swift-å¯¹è±¡ç¼–ç ä¸º-data" tabindex="-1">å°† Swift å¯¹è±¡ç¼–ç ä¸º Data <a class="header-anchor" href="#å°†-swift-å¯¹è±¡ç¼–ç ä¸º-data" aria-label="Permalink to &quot;å°† Swift å¯¹è±¡ç¼–ç ä¸º Data&quot;">â€‹</a></h2><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°†ä½ çš„ Swift æ¨¡å‹ç¼–ç ä¸º <code>Data</code>ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ª <code>User</code> ç»“æ„ä½“ï¼Œå®ƒç¬¦åˆ <code>Encodable</code> åè®®ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Encodable </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newUser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¼ ä¸‰&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zhangsan@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsonData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> encoder.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newUser)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: jsonData, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">utf8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¼–ç å¤±è´¥: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(error)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿™ä¸ªè¿‡ç¨‹éå¸¸é«˜æ•ˆï¼Œé€šå¸¸åœ¨å‡ æ¯«ç§’å†…å®Œæˆã€‚</p><h2 id="å¤„ç†ç¼–ç é€‰é¡¹" tabindex="-1">å¤„ç†ç¼–ç é€‰é¡¹ <a class="header-anchor" href="#å¤„ç†ç¼–ç é€‰é¡¹" aria-label="Permalink to &quot;å¤„ç†ç¼–ç é€‰é¡¹&quot;">â€‹</a></h2><p><code>JSONEncoder</code> æä¾›äº†å¤šç§é…ç½®é€‰é¡¹ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚è¿™äº›é€‰é¡¹å¯ä»¥å¸®åŠ©ä½ æ§åˆ¶è¾“å‡º JSON çš„æ ¼å¼ã€‚</p><p>ä¸€äº›å¸¸ç”¨çš„ <code>outputFormatting</code> é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li><code>.prettyPrinted</code>: ç”Ÿæˆå¯è¯»æ€§æ›´å¥½çš„ JSONï¼Œå¸¦æœ‰ç¼©è¿›å’Œæ¢è¡Œã€‚</li><li><code>.sortedKeys</code>: æŒ‰é”®çš„å­—æ¯é¡ºåºæ’åº JSON å­—å…¸çš„é”®ã€‚</li></ul><p>ä½ è¿˜å¯ä»¥è‡ªå®šä¹‰æ—¥æœŸå’Œæ•°æ®ç¼–ç ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŒ‡å®šæ—¥æœŸå¦‚ä½•è¢«ç¼–ç ä¸ºå­—ç¬¦ä¸²æˆ–æ—¶é—´æˆ³ã€‚</p><ol><li><strong>æ—¥æœŸç¼–ç ç­–ç•¥</strong>: <ul><li><code>.deferredToDate</code></li><li><code>.iso8601</code></li><li><code>.formatted(formatter)</code></li></ul></li><li><strong>æ•°æ®ç¼–ç ç­–ç•¥</strong>: <ul><li><code>.deferredToData</code></li><li><code>.base64</code></li></ul></li></ol><p>é€šè¿‡è¿™äº›é€‰é¡¹ï¼Œä½ å¯ä»¥ç¡®ä¿ç”Ÿæˆçš„ JSON å®Œå…¨ç¬¦åˆä½ çš„ API è§„èŒƒã€‚è¿™å¤§å¤§æå‡äº†ä½ å¤„ç†å¤æ‚ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›ã€‚ğŸ’ª æŒæ¡ <code>JSONEncoder</code> å°†ä½¿ä½ çš„ç½‘ç»œè¯·æ±‚ä»£ç æ›´åŠ å¥å£®å’Œçµæ´»ã€‚</p>`,18)]))}const c=i(l,[["render",t]]);export{E as __pageData,c as default};
