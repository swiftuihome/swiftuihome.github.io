import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ymCRTBvy.js";const b=JSON.parse('{"title":"å®šä¹‰ ObservableObject ä½œä¸ºæ•°æ®æº","description":"","frontmatter":{},"headers":[],"relativePath":"refactor/8.1_å®šä¹‰`ObservableObject`ä½œä¸ºæ•°æ®æº.md","filePath":"refactor/8.1_å®šä¹‰`ObservableObject`ä½œä¸ºæ•°æ®æº.md"}'),l={name:"refactor/8.1_å®šä¹‰`ObservableObject`ä½œä¸ºæ•°æ®æº.md"};function t(p,s,h,k,r,d){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="å®šä¹‰-observableobject-ä½œä¸ºæ•°æ®æº" tabindex="-1">å®šä¹‰ <code>ObservableObject</code> ä½œä¸ºæ•°æ®æº <a class="header-anchor" href="#å®šä¹‰-observableobject-ä½œä¸ºæ•°æ®æº" aria-label="Permalink to &quot;å®šä¹‰ \`ObservableObject\` ä½œä¸ºæ•°æ®æº&quot;">â€‹</a></h1><p>åœ¨ SwiftUI ä¸­ï¼Œ<code>ObservableObject</code> åè®®æ˜¯æ„å»ºå“åº”å¼ç”¨æˆ·ç•Œé¢çš„åŸºçŸ³ã€‚å®ƒå…è®¸ä½ åˆ›å»ºå¯ä»¥è¢« SwiftUI è§†å›¾è§‚å¯Ÿçš„æ•°æ®æ¨¡å‹ï¼Œå½“æ¨¡å‹æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä½¿å¾—æ•°æ®é©±åŠ¨çš„ UI å¼€å‘å˜å¾—ç®€å•è€Œé«˜æ•ˆã€‚ğŸ‰</p><h2 id="åˆ›å»ºä½ çš„æ•°æ®æ¨¡å‹" tabindex="-1">åˆ›å»ºä½ çš„æ•°æ®æ¨¡å‹ <a class="header-anchor" href="#åˆ›å»ºä½ çš„æ•°æ®æ¨¡å‹" aria-label="Permalink to &quot;åˆ›å»ºä½ çš„æ•°æ®æ¨¡å‹&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶è®©å®ƒéµå¾ª <code>ObservableObject</code> åè®®ã€‚è¿™ä¸ªç±»å°†åŒ…å«ä½ çš„åº”ç”¨ç¨‹åºéœ€è¦ç®¡ç†çš„æ•°æ®ã€‚ä½¿ç”¨ <code>@Published</code> å±æ€§åŒ…è£…å™¨æ¥æ ‡è®°é‚£äº›å½“å®ƒä»¬çš„å€¼æ”¹å˜æ—¶éœ€è¦é€šçŸ¥ SwiftUI è§†å›¾çš„å±æ€§ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;åˆå§‹ç”¨æˆ·å&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isLoggedIn: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>username</code> å’Œ <code>isLoggedIn</code> éƒ½æ˜¯ <code>@Published</code> å±æ€§ã€‚è¿™æ„å‘³ç€å½“å®ƒä»¬çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä»»ä½•è§‚å¯Ÿ <code>UserData</code> å®ä¾‹çš„è§†å›¾éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-observableobject" tabindex="-1">ä¸ºä»€ä¹ˆä½¿ç”¨ <code>ObservableObject</code>ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½¿ç”¨-observableobject" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆä½¿ç”¨ \`ObservableObject\`ï¼Ÿ&quot;">â€‹</a></h2><p>ä½¿ç”¨ <code>ObservableObject</code> å¯ä»¥å¸®åŠ©ä½ å°†æ•°æ®é€»è¾‘ä»è§†å›¾ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å¾—ä½ çš„ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯æµ‹è¯•ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜ç®€åŒ–äº†çŠ¶æ€ç®¡ç†ï¼Œå› ä¸º SwiftUI ä¼šè‡ªåŠ¨å¤„ç†è§†å›¾çš„æ›´æ–°ã€‚</p><ul><li><strong>æ•°æ®ç»‘å®š</strong>: å…è®¸è§†å›¾ç›´æ¥ç»‘å®šåˆ°æ•°æ®æ¨¡å‹ã€‚</li><li><strong>è‡ªåŠ¨æ›´æ–°</strong>: å½“æ•°æ®æ¨¡å‹æ”¹å˜æ—¶ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°ã€‚</li><li><strong>ä»£ç ç»„ç»‡</strong>: ä¿ƒè¿›äº†æ¸…æ™°çš„ä»£ç ç»“æ„å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul><h2 id="å®è·µæ¡ˆä¾‹" tabindex="-1">å®è·µæ¡ˆä¾‹ <a class="header-anchor" href="#å®è·µæ¡ˆä¾‹" aria-label="Permalink to &quot;å®è·µæ¡ˆä¾‹&quot;">â€‹</a></h2><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>AuthManager</code> ç±»ï¼Œéµå¾ª <code>ObservableObject</code> åè®®ï¼Œå¹¶åŒ…å«ç”¨æˆ·è®¤è¯çŠ¶æ€å’Œç›¸å…³æ•°æ®ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isAuthenticated: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userEmail: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ¨¡æ‹Ÿç™»å½•é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;test@example.com&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            isAuthenticated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            userEmail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        isAuthenticated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userEmail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ SwiftUI è§†å›¾ä¸­ä½¿ç”¨ <code>@EnvironmentObject</code> æ¥è®¿é—®å’Œè§‚å¯Ÿ <code>AuthManager</code> å®ä¾‹ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„è®¤è¯çŠ¶æ€æ¥æ›´æ–° UIã€‚è¿™ä½¿å¾—æ„å»ºåŠ¨æ€å’Œå“åº”å¼çš„ç”¨æˆ·ç•Œé¢å˜å¾—éå¸¸å®¹æ˜“ã€‚ğŸš€</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p><code>ObservableObject</code> æ˜¯ SwiftUI ä¸­ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ„å»ºå¯ç»´æŠ¤å’Œå“åº”å¼çš„åº”ç”¨ç¨‹åºã€‚é€šè¿‡å°†æ•°æ®æ¨¡å‹ä¸è§†å›¾åˆ†ç¦»ï¼Œå¹¶åˆ©ç”¨ <code>@Published</code> å±æ€§åŒ…è£…å™¨ï¼Œä½ å¯ä»¥è½»æ¾åœ°ç®¡ç†åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå¹¶ç¡®ä¿ UI å§‹ç»ˆä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚è®°ä½ï¼Œè‰¯å¥½çš„æ•°æ®ç®¡ç†æ˜¯æ„å»ºä¼˜ç§€ SwiftUI åº”ç”¨çš„å…³é”®ï¼ğŸ‘</p>`,15)]))}const o=i(l,[["render",t]]);export{b as __pageData,o as default};
