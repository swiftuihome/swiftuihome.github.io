import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.ymCRTBvy.js";const c=JSON.parse('{"title":"åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView","description":"","frontmatter":{},"headers":[],"relativePath":"advanced/12.5_åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView.md","filePath":"advanced/12.5_åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView.md"}'),l={name:"advanced/12.5_åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView.md"};function t(p,s,h,k,r,d){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="åœ¨-swiftui-ä¸­åµŒå…¥-wkwebview" tabindex="-1">åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView <a class="header-anchor" href="#åœ¨-swiftui-ä¸­åµŒå…¥-wkwebview" aria-label="Permalink to &quot;åœ¨ SwiftUI ä¸­åµŒå…¥ WKWebView&quot;">â€‹</a></h1><h2 id="æ•´åˆ-wkwebview" tabindex="-1">æ•´åˆ WKWebView <a class="header-anchor" href="#æ•´åˆ-wkwebview" aria-label="Permalink to &quot;æ•´åˆ WKWebView&quot;">â€‹</a></h2><p>åœ¨ SwiftUI ä¸­åµŒå…¥ <code>WKWebView</code> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æŠ€å·§ï¼Œå®ƒå…è®¸ä½ åœ¨ SwiftUI åº”ç”¨ä¸­å±•ç¤ºç½‘é¡µå†…å®¹ã€‚ ğŸš€ è¿™å¯¹äºéœ€è¦æ˜¾ç¤ºåŠ¨æ€ç½‘é¡µã€é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡æˆ–å±•ç¤ºå¯Œæ–‡æœ¬å†…å®¹çš„åœºæ™¯è‡³å…³é‡è¦ã€‚</p><p>é€šè¿‡ <code>UIViewRepresentable</code> åè®®ï¼Œä½ å¯ä»¥è½»æ¾åœ°å°† <code>WKWebView</code> è¿™ä¸ª UIKit ç»„ä»¶æ¡¥æ¥åˆ° SwiftUI è§†å›¾å±‚çº§ä¸­ã€‚ è¿™ç§æ— ç¼é›†æˆèƒ½åŠ›æå¤§åœ°æ‰©å±•äº† SwiftUI çš„åº”ç”¨èŒƒå›´ã€‚</p><h2 id="å®ç°-wkwebviewrepresentable" tabindex="-1">å®ç° WKWebViewRepresentable <a class="header-anchor" href="#å®ç°-wkwebviewrepresentable" aria-label="Permalink to &quot;å®ç° WKWebViewRepresentable&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªéµå¾ª <code>UIViewRepresentable</code> åè®®çš„ç»“æ„ä½“ã€‚ è¿™ä¸ªç»“æ„ä½“å°†è´Ÿè´£åˆ›å»ºå’Œé…ç½® <code>WKWebView</code> å®ä¾‹ã€‚</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwiftUI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebKit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WKWebViewRepresentable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UIViewRepresentable </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url: URL</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeUIView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WKWebView {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> WKWebView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateUIView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uiView: WKWebView, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> URLRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uiView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨ <code>makeUIView</code> æ–¹æ³•ä¸­ï¼Œä½ åˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ª <code>WKWebView</code> å®ä¾‹ã€‚ è€Œ <code>updateUIView</code> æ–¹æ³•åˆ™è´Ÿè´£åŠ è½½æŒ‡å®šçš„ URLã€‚</p><h2 id="åœ¨-swiftui-è§†å›¾ä¸­ä½¿ç”¨" tabindex="-1">åœ¨ SwiftUI è§†å›¾ä¸­ä½¿ç”¨ <a class="header-anchor" href="#åœ¨-swiftui-è§†å›¾ä¸­ä½¿ç”¨" aria-label="Permalink to &quot;åœ¨ SwiftUI è§†å›¾ä¸­ä½¿ç”¨&quot;">â€‹</a></h2><p>ä¸€æ—¦ä½ åˆ›å»ºäº† <code>WKWebViewRepresentable</code>ï¼Œå°±å¯ä»¥åƒä½¿ç”¨ä»»ä½•å…¶ä»– SwiftUI è§†å›¾ä¸€æ ·åœ¨ä½ çš„åº”ç”¨ä¸­åµŒå…¥å®ƒäº†ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œåªéœ€å‡ è¡Œä»£ç å°±èƒ½åœ¨ä½ çš„åº”ç”¨ä¸­å±•ç¤ºä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µï¼</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        WKWebViewRepresentable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.apple.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">edgesIgnoringSafeArea</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(.all)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ®µä»£ç å°†ä¼šåœ¨ä½ çš„ SwiftUI è§†å›¾ä¸­æ˜¾ç¤º Apple å®˜ç½‘ã€‚ ä½ å¯ä»¥è½»æ¾åœ°æ›¿æ¢ URL æ¥åŠ è½½ä»»ä½•ä½ æƒ³è¦çš„ç½‘é¡µã€‚ ğŸŒ</p><h2 id="é«˜çº§é…ç½®ä¸äº¤äº’" tabindex="-1">é«˜çº§é…ç½®ä¸äº¤äº’ <a class="header-anchor" href="#é«˜çº§é…ç½®ä¸äº¤äº’" aria-label="Permalink to &quot;é«˜çº§é…ç½®ä¸äº¤äº’&quot;">â€‹</a></h2><p><code>WKWebView</code> æä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œä»£ç†æ–¹æ³•ï¼Œå¯ä»¥å®ç°æ›´é«˜çº§çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥ï¼š</p><ul><li><strong>å¤„ç†å¯¼èˆªäº‹ä»¶</strong>: é€šè¿‡ <code>WKNavigationDelegate</code> åè®®ï¼Œä½ å¯ä»¥æ§åˆ¶ç½‘é¡µçš„åŠ è½½è¡Œä¸ºï¼Œä¾‹å¦‚é˜»æ­¢æŸäº›é“¾æ¥çš„è·³è½¬ã€‚</li><li><strong>æ‰§è¡Œ JavaScript</strong>: ä½¿ç”¨ <code>evaluateJavaScript</code> æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ç½‘é¡µä¸­æ‰§è¡Œ JavaScript ä»£ç ï¼Œå®ç° SwiftUI ä¸ç½‘é¡µä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚</li><li><strong>ç®¡ç† Cookie</strong>: <code>WKWebsiteDataStore</code> å…è®¸ä½ ç®¡ç†ç½‘é¡µçš„ç¼“å­˜å’Œ Cookie æ•°æ®ã€‚</li></ul><p>è¿™äº›é«˜çº§åŠŸèƒ½ä½¿å¾— <code>WKWebView</code> ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ç½‘é¡µæ˜¾ç¤ºå™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªå¼ºå¤§çš„äº¤äº’å·¥å…·ã€‚ ğŸš€ æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å°†èƒ½å¤Ÿæ„å»ºå‡ºåŠŸèƒ½æ›´åŠ ä¸°å¯Œçš„ SwiftUI åº”ç”¨ã€‚ äº‹å®ä¸Šï¼Œè¶…è¿‡ 70% çš„ iOS å¼€å‘è€…åœ¨éœ€è¦å±•ç¤ºç½‘é¡µå†…å®¹æ—¶ä¼šé€‰æ‹© <code>WKWebView</code>ã€‚</p>`,16)]))}const o=i(l,[["render",t]]);export{c as __pageData,o as default};
